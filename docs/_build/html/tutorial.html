
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Tutorial &#8212; dimcat 0.3.0.post1.dev104+g9c57474 documentation</title>



  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>

  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">


  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Manual" href="manual.html" />
    <link rel="prev" title="dimcat" href="readme.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>


  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">



  <a class="skip-link" href="#main-content">Skip to main content</a>


  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>


  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>


  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>


  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">





<a class="navbar-brand logo" href="index.html">











    <p class="title logo__title">dimcat 0.3.0.post1.dev104+g9c57474 documentation</p>

</a>

  </div>


  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">

      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="readme.html">
                        Overview
                      </a>
                    </li>


                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Tutorial
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="manual.html">
                        Manual
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="notebooks.html">
                        Example Notebooks
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="contributing.html">
                        Contributions & Help
                      </a>
                    </li>

            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="license.html">
                        License
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="authors.html">
                        Authors
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="changelog.html">
                        Changelog
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api/modules.html">
                        Module Reference
                      </a>
                    </li>

                </div>
            </div>

    </ul>
</nav>
      </div>

    </div>

    <div id="navbar-end">

        <div class="navbar-end-item navbar-persistent--container">

<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>


      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>

      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>

    </div>
  </div>




    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>



  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>


</div>
  </nav>


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">

      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">


  <div class="sidebar-header-items sidebar-primary__section">


      <div class="sidebar-header-items__center">

      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="readme.html">
                        Overview
                      </a>
                    </li>


                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Tutorial
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="manual.html">
                        Manual
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="notebooks.html">
                        Example Notebooks
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="contributing.html">
                        Contributions & Help
                      </a>
                    </li>

            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="license.html">
                        License
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="authors.html">
                        Authors
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="changelog.html">
                        Changelog
                      </a>
                    </li>


                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api/modules.html">
                        Module Reference
                      </a>
                    </li>

                </div>
            </div>

    </ul>
</nav>
      </div>

      </div>




    <div class="sidebar-header-items__end">

      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>

      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>

    </div>

  </div>




  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>


  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">


        <div class="bd-content">
          <div class="bd-article-container">

            <div class="bd-header-article">

            </div>


            <article class="bd-article" role="main">

  <section id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading">#</a></h1>
<p>In order to run this notebook:</p>
<ul class="simple">
<li><p>create new environment, make it visible to your Jupyter</p>
<ul>
<li><p>for conda do <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">--name</span> <span class="pre">{name}</span> <span class="pre">python=3.10</span></code></p></li>
<li><p>activate it and install <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">ipykernel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipython</span> <span class="pre">kernel</span> <span class="pre">install</span> <span class="pre">--user</span> <span class="pre">--name={name}</span></code></p></li>
</ul>
</li>
<li><p>within the new environment, install requirements, e.g. <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p>
<ul>
<li><p>this currently involves installing the current development versions of ms3 and dimcat</p></li>
</ul>
</li>
<li><p>clone the corpus: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">--recurse-submodules</span> <span class="pre">-j8</span> <span class="pre">git&#64;github.com:DCMLab/unittest_metacorpus.git</span></code></p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">meta_repo</span></code> in the second cell to your local clone.</p></li>
</ul>
<p>If the plots are not displayed and you are in JupyterLab, use <a class="reference external" href="https://plotly.com/python/getting-started/#jupyterlab-support">this guide</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">git</span> <span class="kn">import</span> <span class="n">Repo</span>
<span class="kn">import</span> <span class="nn">dimcat</span> <span class="k">as</span> <span class="nn">dc</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meta_repo</span> <span class="o">=</span> <span class="s2">&quot;~/unittest_metacorpus&quot;</span>
<span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">meta_repo</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">meta_repo</span><span class="p">)</span><span class="si">}</span><span class="s2"> @ </span><span class="si">{</span><span class="n">repo</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span><span class="o">.</span><span class="n">hexsha</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;dimcat version </span><span class="si">{</span><span class="n">dc</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>unittest_metacorpus @ c3b7a76
dimcat version 0.3.0.post1.dev104+g9c57474
</pre></div>
</div>
</div>
</div>
<section id="the-dataset-object">
<h2>The Dataset object<a class="headerlink" href="#the-dataset-object" title="Permalink to this heading">#</a></h2>
<section id="initializing-a-dataset">
<h3>Initializing a Dataset<a class="headerlink" href="#initializing-a-dataset" title="Permalink to this heading">#</a></h3>
<p>Pass a directory to <code class="docutils literal notranslate"><span class="pre">dimcat.Dataset.load()</span></code> to discover and parse all TSV files. The property <code class="docutils literal notranslate"><span class="pre">data</span></code> simply returns an <code class="docutils literal notranslate"><span class="pre">ms3.Parse</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">()</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="n">meta_repo</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING  ms3.Parse.mixed_files -- /home/hentsche/PycharmProjects/ms3/src/ms3/corpus.py (line 865) fnames_in_metadata():
	No metadata.tsv file has been detected for this Corpus object.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING  ms3.Parse.outputs -- /home/hentsche/PycharmProjects/ms3/src/ms3/corpus.py (line 865) fnames_in_metadata():
	No metadata.tsv file has been detected for this Corpus object.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[<span class=" -Color -Color-Bold">default</span>|all]
All corpora
-----------
View: This view is called &#39;default&#39;. It
	- excludes fnames that are not contained in the metadata,
	- filters out file extensions requiring conversion (such as .xml), and
	- excludes review files and folders.

                        has   active measures  notes expanded   scores measures    notes expanded
                   metadata     view   parsed parsed   parsed detected detected detected detected
corpus
mixed_files              no  default        0      0        0        0        0        0        0
outputs                  no  default        0      0        0        0        0        0        0
ravel_piano             yes  default        5      5        3        5        5        5        3
sweelinck_keyboard      yes  default        1      1        1        1        1        1        1
wagner_overtures        yes  default        2      2        2        2        2        2        2

48/194 files are excluded from this view.

6 files have been excluded based on their file name.
42 files have been excluded based on their subdir.


There are 3 orphans that could not be attributed to any of the respective corpus&#39;s fnames.
</pre></div>
</div>
</div>
</div>
</section>
<section id="accessing-pieces-using-ids">
<h3>Accessing pieces using IDs<a class="headerlink" href="#accessing-pieces-using-ids" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>The field <code class="docutils literal notranslate"><span class="pre">Dataset.pieces</span></code> holds references to <code class="docutils literal notranslate"><span class="pre">ms3.Piece</span></code> objects which reunite data facets such as note tables, (harmony) annotation tables for all the loaded pieces.</p></li>
<li><p>Pieces are addressed by means of an index/ID of the form <code class="docutils literal notranslate"><span class="pre">('corpus_name',</span> <span class="pre">'fname')</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">pieces</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_I._Noctuelles&#39;),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_II._Oiseaux_tristes&#39;),
 (&#39;ravel_piano&#39;, &quot;Ravel_-_Miroirs_III._Une_Barque_sur_l&#39;ocean&quot;),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_IV._Alborada_del_gracioso&#39;),
 (&#39;sweelinck_keyboard&#39;, &#39;SwWV258_fantasia_cromatica&#39;),
 (&#39;wagner_overtures&#39;,
  &#39;WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia&#39;),
 (&#39;wagner_overtures&#39;,
  &#39;WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">pieces</span><span class="p">[(</span><span class="s1">&#39;ravel_piano&#39;</span><span class="p">,</span> <span class="s1">&#39;Ravel_-_Jeux_dEau&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[<span class=" -Color -Color-Bold">default</span>|all]
Piece &#39;Ravel_-_Jeux_dEau&#39;
-------------------------
View: This view is called &#39;default&#39;. It
	- excludes fnames that are not contained in the metadata,
	- filters out file extensions requiring conversion (such as .xml), and
	- excludes review files and folders.

                                    rel_path  is_parsed
facet    ix
scores   1        MS3/Ravel_-_Jeux_dEau.mscx      False
measures 9    measures/Ravel_-_Jeux_dEau.tsv       True
notes    14      notes/Ravel_-_Jeux_dEau.tsv       True
expanded 6   harmonies/Ravel_-_Jeux_dEau.tsv       True

2/6 files are excluded from this view.

2 files have been excluded based on their subdir.
</pre></div>
</div>
</div>
</div>
</section>
<section id="groups-of-ids">
<h3>Groups of IDs<a class="headerlink" href="#groups-of-ids" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Accessing any kind of information from the Dataset relies on the current grouping of IDs.</p></li>
<li><p>Although the <code class="docutils literal notranslate"><span class="pre">ms3.Parse</span></code> object groups data into various corpora, DiMCAT assumes no grouping before any Grouper has been applied (see below).</p></li>
<li><p>Instead, after initialization, all indices are grouped into one list, accessible through the key <code class="docutils literal notranslate"><span class="pre">()</span></code> (empty tuple).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">indices</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{(): [(&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;),
  (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_I._Noctuelles&#39;),
  (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_II._Oiseaux_tristes&#39;),
  (&#39;ravel_piano&#39;, &quot;Ravel_-_Miroirs_III._Une_Barque_sur_l&#39;ocean&quot;),
  (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_IV._Alborada_del_gracioso&#39;),
  (&#39;sweelinck_keyboard&#39;, &#39;SwWV258_fantasia_cromatica&#39;),
  (&#39;wagner_overtures&#39;,
   &#39;WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia&#39;),
  (&#39;wagner_overtures&#39;,
   &#39;WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel&#39;)]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="accessing-data-facets">
<h3>Accessing data facets<a class="headerlink" href="#accessing-data-facets" title="Permalink to this heading">#</a></h3>
<p>Currently, the following facets may be available, depending on the state of annotations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'measures'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'notes'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'rests'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'notes_and_rests'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'labels'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'expanded'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'form_labels'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'cadences'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'events'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'chords'</span></code></p></li>
</ul>
<p>There are two ways of accessing facets of a Dataset:</p>
<section id="iterating">
<h4>Iterating<a class="headerlink" href="#iterating" title="Permalink to this heading">#</a></h4>
<p>For example, to iterate through note lists:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">id2dataframe</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">iter_facet</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">ID</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">id2dataframe</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;First note of </span><span class="si">{</span><span class="n">ID</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.5</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>4</td>
      <td>64</td>
      <td>E4</td>
      <td>4</td>
      <td>20</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_I._Noctuelles&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 0.3333333333333333)</th>
      <td>0</td>
      <td>0.333333</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/12</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>2/3</td>
      <td>&lt;NA&gt;</td>
      <td>-6</td>
      <td>78</td>
      <td>Gb5</td>
      <td>5</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_II._Oiseaux_tristes&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.5</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>-2</td>
      <td>82</td>
      <td>Bb5</td>
      <td>5</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;ravel_piano&#39;, &quot;Ravel_-_Miroirs_III._Une_Barque_sur_l&#39;ocean&quot;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 0.0833333333333333)</th>
      <td>0</td>
      <td>0.083333</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/48</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/32</td>
      <td>2/3</td>
      <td>&lt;NA&gt;</td>
      <td>6</td>
      <td>54</td>
      <td>F#3</td>
      <td>3</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_IV._Alborada_del_gracioso&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.5</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>6/8</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>2</td>
      <td>62</td>
      <td>D4</td>
      <td>4</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;sweelinck_keyboard&#39;, &#39;SwWV258_fantasia_cromatica&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mc</th>
      <th>mn</th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 4.0)</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>4.0</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>2</td>
      <td>62</td>
      <td>D4</td>
      <td>4</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;wagner_overtures&#39;, &#39;WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mc</th>
      <th>mn</th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 0.5)</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0.5</td>
      <td>0</td>
      <td>5/8</td>
      <td>6/8</td>
      <td>1</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>3</td>
      <td>57</td>
      <td>A3</td>
      <td>3</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First note of (&#39;wagner_overtures&#39;, &#39;WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel&#39;):
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mc</th>
      <th>mn</th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>[0.0, 1.0)</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1.0</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/4</td>
      <td>NaN</td>
      <td>1/8_c32_1</td>
      <td>1/4</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
      <td>36</td>
      <td>C2</td>
      <td>2</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>or, since no Groupers have been applied, we can also skip the first loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ID</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">iter_facet</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="n">ignore_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time signatures in </span><span class="si">{</span><span class="n">ID</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">timesig</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Time signatures in (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;): [&#39;4/4&#39;, &#39;2/4&#39;, &#39;3/4&#39;]
Time signatures in (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_I._Noctuelles&#39;): [&#39;3/4&#39;, &#39;3/8&#39;, &#39;5/8&#39;, &#39;6/8&#39;, &#39;2/4&#39;, &#39;5/4&#39;, &#39;4/4&#39;]
Time signatures in (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_II._Oiseaux_tristes&#39;): [&#39;4/4&#39;, &#39;3/4&#39;, &#39;12/8&#39;, &#39;2/4&#39;]
Time signatures in (&#39;ravel_piano&#39;, &quot;Ravel_-_Miroirs_III._Une_Barque_sur_l&#39;ocean&quot;): [&#39;2/4&#39;, &#39;3/4&#39;, &#39;1/4&#39;, &#39;4/4&#39;, &#39;5/4&#39;]
Time signatures in (&#39;ravel_piano&#39;, &#39;Ravel_-_Miroirs_IV._Alborada_del_gracioso&#39;): [&#39;6/8&#39;, &#39;3/8&#39;, &#39;9/8&#39;, &#39;3/4&#39;]
Time signatures in (&#39;sweelinck_keyboard&#39;, &#39;SwWV258_fantasia_cromatica&#39;): [&#39;4/4&#39;]
Time signatures in (&#39;wagner_overtures&#39;, &#39;WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia&#39;): [&#39;6/8&#39;]
Time signatures in (&#39;wagner_overtures&#39;, &#39;WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel&#39;): [&#39;4/4&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="getting">
<h4>Getting<a class="headerlink" href="#getting" title="Permalink to this heading">#</a></h4>
<p>Or we simply retrieve a concatenated DataFrame with a MultiIndex (i.e. an index with several hierarchical levels):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="o">.</span><span class="n">get_facet</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>corpus</th>
      <th>fname</th>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">ravel_piano</th>
      <th rowspan="5" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.50</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>4</td>
      <td>64</td>
      <td>E4</td>
      <td>4</td>
      <td>20</td>
    </tr>
    <tr>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.50</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>5</td>
      <td>71</td>
      <td>B4</td>
      <td>4</td>
      <td>20</td>
    </tr>
    <tr>
      <th>[0.0, 0.25)</th>
      <td>0</td>
      <td>0.25</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/16</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/16</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>9</td>
      <td>75</td>
      <td>D#5</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[0.25, 0.5)</th>
      <td>1/4</td>
      <td>0.25</td>
      <td>1</td>
      <td>1</td>
      <td>1/16</td>
      <td>1/16</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/16</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/16</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>8</td>
      <td>80</td>
      <td>G#5</td>
      <td>5</td>
      <td>1</td>
    </tr>
    <tr>
      <th>[0.5, 1.0)</th>
      <td>1/2</td>
      <td>0.50</td>
      <td>1</td>
      <td>1</td>
      <td>1/8</td>
      <td>1/8</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>8</td>
      <td>68</td>
      <td>G#4</td>
      <td>4</td>
      <td>21</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">wagner_overtures</th>
      <th rowspan="5" valign="top">WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>1</td>
      <td>55</td>
      <td>G3</td>
      <td>3</td>
      <td>4130</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
      <td>60</td>
      <td>C4</td>
      <td>4</td>
      <td>4130</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>4</td>
      <td>64</td>
      <td>E4</td>
      <td>4</td>
      <td>4129</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>1</td>
      <td>67</td>
      <td>G4</td>
      <td>4</td>
      <td>4129</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
      <td>72</td>
      <td>C5</td>
      <td>5</td>
      <td>4129</td>
    </tr>
  </tbody>
</table>
<p>28037 rows  20 columns</p>
</div></div></div>
</div>
</section>
</section>
</section>
<section id="applying-pipelinesteps-to-a-dataset">
<h2>Applying PipelineSteps to a Dataset<a class="headerlink" href="#applying-pipelinesteps-to-a-dataset" title="Permalink to this heading">#</a></h2>
<p>Everything else in DiMCAT is a PipelineStep which are distributed over several modules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dimcat.filter</span></code>: Filters return a new Dataset where certain IDs have been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimcat.grouper</span></code>: Groupers subdivide each of the current ID groups based on a given criterion and return a new Dataset with an altered <code class="docutils literal notranslate"><span class="pre">.indices</span></code> field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimcat.slicer</span></code>: Slicers create for each ID (read: piece) a set of chunks identified by non-overlapping intervals. Any facet retrieved from such a sliced Dataset will be sliced, cutting and duplicating any event that overlaps the interval boundaries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimcat.analyzer</span></code>: Analyzers perform an analysis on a given Dataset and return a new Dataset with the results stored in the <code class="docutils literal notranslate"><span class="pre">.processed</span></code> field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimcat.plotter</span></code>: Plotters plot analysis (processed) data and potentially output plots as files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimcat.writer</span></code>: Writers output analyzed data to disk.</p></li>
</ul>
<p>All these PipelineSteps come with the method <code class="docutils literal notranslate"><span class="pre">process_data()</span></code> and return a copy of the given Dataset.</p>
<section id="applying-a-filter">
<h3>Applying a filter<a class="headerlink" href="#applying-a-filter" title="Permalink to this heading">#</a></h3>
<p>Lets see this principle at work by applying the <code class="docutils literal notranslate"><span class="pre">IsAnnotatedFilter</span></code> which returns a new Dataset where all pieces contain harmony annotations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">annotated</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">IsAnnotatedFilter</span><span class="p">()</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before: </span><span class="si">{</span><span class="n">dataset</span><span class="o">.</span><span class="n">n_indices</span><span class="si">}</span><span class="s2"> IDs, after filtering: </span><span class="si">{</span><span class="n">annotated</span><span class="o">.</span><span class="n">n_indices</span><span class="si">}</span><span class="s2"> IDs&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before: 8 IDs, after filtering: 6 IDs
</pre></div>
</div>
</div>
</div>
</section>
<section id="applying-a-slicer">
<h3>Applying a slicer<a class="headerlink" href="#applying-a-slicer" title="Permalink to this heading">#</a></h3>
<p>Now we apply the <code class="docutils literal notranslate"><span class="pre">LocalKeySlicer</span></code>, slicing the annotation tables into segments that remain in one local key:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">localkey_slices</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">LocalKeySlicer</span><span class="p">()</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">annotated</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before: </span><span class="si">{</span><span class="n">annotated</span><span class="o">.</span><span class="n">n_indices</span><span class="si">}</span><span class="s2"> IDs, after slicing: </span><span class="si">{</span><span class="n">localkey_slices</span><span class="o">.</span><span class="n">n_indices</span><span class="si">}</span><span class="s2"> IDs&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Facets that have been sliced so far: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">localkey_slices</span><span class="o">.</span><span class="n">sliced</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before: 6 IDs, after slicing: 60 IDs
Facets that have been sliced so far: [&#39;expanded&#39;].
</pre></div>
</div>
</div>
</div>
<p>The IDs of the sliced Dataset have multiplied and received a third element, which is the interval specifying the extent of one slice. Lets have a look at the first 10 IDs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">localkey_slices</span><span class="o">.</span><span class="n">indices</span><span class="p">[()][:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(0.0, 28.0, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(28.0, 63.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(63.25, 83.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(83.25, 91.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(91.25, 103.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(103.25, 111.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(111.25, 117.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(117.25, 134.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(134.25, 141.25, closed=&#39;left&#39;)),
 (&#39;ravel_piano&#39;, &#39;Ravel_-_Jeux_dEau&#39;, Interval(141.25, 153.25, closed=&#39;left&#39;))]
</pre></div>
</div>
</div>
</div>
<p>The IDs make sure that all facets retrieved from this Dataset will be sliced.</p>
<p>This is True not only for the facet that has been used for slicing (annotation tables in the present case):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">localkey_slices</span><span class="o">.</span><span class="n">get_facet</span><span class="p">(</span><span class="s1">&#39;expanded&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>label</th>
      <th>...</th>
      <th>relativeroot</th>
      <th>cadence</th>
      <th>phraseend</th>
      <th>chord_type</th>
      <th>globalkey_is_minor</th>
      <th>localkey_is_minor</th>
      <th>chord_tones</th>
      <th>added_tones</th>
      <th>root</th>
      <th>bass_note</th>
    </tr>
    <tr>
      <th>corpus</th>
      <th>fname</th>
      <th>localkey_slice</th>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="30" valign="top">ravel_piano</th>
      <th rowspan="30" valign="top">Ravel_-_Jeux_dEau</th>
      <th rowspan="28" valign="top">[0.0, 28.0)</th>
      <th>[0.0, 1.5)</th>
      <td>0</td>
      <td>1.5</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>E.IM7(9)</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, 5)</td>
      <td>(2,)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[1.5, 2.0)</th>
      <td>3/2</td>
      <td>0.5</td>
      <td>1</td>
      <td>1</td>
      <td>3/8</td>
      <td>3/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[2.0, 3.5)</th>
      <td>2</td>
      <td>1.5</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>1/2</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IM7(9)</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, 5)</td>
      <td>(2,)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[3.5, 4.0)</th>
      <td>7/2</td>
      <td>0.5</td>
      <td>1</td>
      <td>1</td>
      <td>7/8</td>
      <td>7/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[4.0, 6.0)</th>
      <td>4</td>
      <td>2.0</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>2/4</td>
      <td>3</td>
      <td>1</td>
      <td>IM7(9)</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, 5)</td>
      <td>(2,)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[6.0, 7.5)</th>
      <td>6</td>
      <td>1.5</td>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[7.5, 8.0)</th>
      <td>15/2</td>
      <td>0.5</td>
      <td>3</td>
      <td>3</td>
      <td>3/8</td>
      <td>3/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/vi</td>
      <td>...</td>
      <td>vi</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-2, 2, 4, 8)</td>
      <td>(0,)</td>
      <td>4</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>[8.0, 9.5)</th>
      <td>8</td>
      <td>1.5</td>
      <td>3</td>
      <td>3</td>
      <td>1/2</td>
      <td>1/2</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[9.5, 10.0)</th>
      <td>19/2</td>
      <td>0.5</td>
      <td>3</td>
      <td>3</td>
      <td>7/8</td>
      <td>7/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/vi</td>
      <td>...</td>
      <td>vi</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-2, 2, 4, 8)</td>
      <td>(0,)</td>
      <td>4</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>[10.0, 11.0)</th>
      <td>10</td>
      <td>1.0</td>
      <td>4</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[11.0, 12.0)</th>
      <td>11</td>
      <td>1.0</td>
      <td>4</td>
      <td>4</td>
      <td>1/4</td>
      <td>1/4</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7(9+#4)/bIII</td>
      <td>...</td>
      <td>bIII</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-2, 2, -1, -4)</td>
      <td>(0, 4)</td>
      <td>-2</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>[12.0, 12.5)</th>
      <td>12</td>
      <td>0.5</td>
      <td>4</td>
      <td>4</td>
      <td>1/2</td>
      <td>1/2</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/iv</td>
      <td>...</td>
      <td>iv</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-6, -2, 0, 4)</td>
      <td>(-4,)</td>
      <td>0</td>
      <td>-6</td>
    </tr>
    <tr>
      <th>[12.5, 13.0)</th>
      <td>25/2</td>
      <td>0.5</td>
      <td>4</td>
      <td>4</td>
      <td>5/8</td>
      <td>5/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/ii</td>
      <td>...</td>
      <td>ii</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-3, 1, 3, 7)</td>
      <td>(-1,)</td>
      <td>3</td>
      <td>-3</td>
    </tr>
    <tr>
      <th>[13.0, 13.5)</th>
      <td>13</td>
      <td>0.5</td>
      <td>4</td>
      <td>4</td>
      <td>3/4</td>
      <td>3/4</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7(9+#4)/IV</td>
      <td>...</td>
      <td>IV</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, -2)</td>
      <td>(2, 6)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[13.5, 14.0)</th>
      <td>27/2</td>
      <td>0.5</td>
      <td>4</td>
      <td>4</td>
      <td>7/8</td>
      <td>7/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7(9b5)/ii</td>
      <td>...</td>
      <td>ii</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(3, 7, -3, 1)</td>
      <td>(-2,)</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>[14.0, 15.5)</th>
      <td>14</td>
      <td>1.5</td>
      <td>5</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/iv</td>
      <td>...</td>
      <td>iv</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-6, -2, 0, 4)</td>
      <td>(-4,)</td>
      <td>0</td>
      <td>-6</td>
    </tr>
    <tr>
      <th>[15.5, 16.0)</th>
      <td>31/2</td>
      <td>0.5</td>
      <td>5</td>
      <td>5</td>
      <td>3/8</td>
      <td>3/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7(9b5)/ii</td>
      <td>...</td>
      <td>ii</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(3, 7, -3, 1)</td>
      <td>(-2,)</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>[16.0, 17.5)</th>
      <td>16</td>
      <td>1.5</td>
      <td>5</td>
      <td>5</td>
      <td>1/2</td>
      <td>1/2</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/iv</td>
      <td>...</td>
      <td>iv</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-6, -2, 0, 4)</td>
      <td>(-4,)</td>
      <td>0</td>
      <td>-6</td>
    </tr>
    <tr>
      <th>[17.5, 18.0)</th>
      <td>35/2</td>
      <td>0.5</td>
      <td>5</td>
      <td>5</td>
      <td>7/8</td>
      <td>7/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7(9b5)/ii</td>
      <td>...</td>
      <td>ii</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(3, 7, -3, 1)</td>
      <td>(-2,)</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>[18.0, 20.5)</th>
      <td>18</td>
      <td>2.5</td>
      <td>6</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(+6b5)/iv</td>
      <td>...</td>
      <td>iv</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-6, -2, 0, 4)</td>
      <td>(-4,)</td>
      <td>0</td>
      <td>-6</td>
    </tr>
    <tr>
      <th>[20.5, 21.0)</th>
      <td>41/2</td>
      <td>0.5</td>
      <td>6</td>
      <td>6</td>
      <td>5/8</td>
      <td>5/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7/vi</td>
      <td>...</td>
      <td>vi</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(4, 8, 5, 2)</td>
      <td>()</td>
      <td>4</td>
      <td>4</td>
    </tr>
    <tr>
      <th>[21.0, 21.5)</th>
      <td>21</td>
      <td>0.5</td>
      <td>6</td>
      <td>6</td>
      <td>3/4</td>
      <td>3/4</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V7/V</td>
      <td>...</td>
      <td>V</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(2, 6, 3, 0)</td>
      <td>()</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>[21.5, 22.0)</th>
      <td>43/2</td>
      <td>0.5</td>
      <td>6</td>
      <td>6</td>
      <td>7/8</td>
      <td>7/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>V43(b5)\\</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>\\</td>
      <td>Mm7</td>
      <td>False</td>
      <td>False</td>
      <td>(-5, -1, 1, 5)</td>
      <td>()</td>
      <td>1</td>
      <td>-5</td>
    </tr>
    <tr>
      <th>[22.0, 23.5)</th>
      <td>22</td>
      <td>1.5</td>
      <td>7</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IM7(9)</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, 5)</td>
      <td>(2,)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[23.5, 24.0)</th>
      <td>47/2</td>
      <td>0.5</td>
      <td>7</td>
      <td>7</td>
      <td>3/8</td>
      <td>3/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[24.0, 25.5)</th>
      <td>24</td>
      <td>1.5</td>
      <td>7</td>
      <td>7</td>
      <td>1/2</td>
      <td>1/2</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IM7(9)</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, 5)</td>
      <td>(2,)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[25.5, 26.0)</th>
      <td>51/2</td>
      <td>0.5</td>
      <td>7</td>
      <td>7</td>
      <td>7/8</td>
      <td>7/8</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>IVM7</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(-1, 3, 0, 4)</td>
      <td>()</td>
      <td>-1</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>[26.0, 28.0)</th>
      <td>26</td>
      <td>2.0</td>
      <td>8</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>2/4</td>
      <td>3</td>
      <td>1</td>
      <td>IM7(9)</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MM7</td>
      <td>False</td>
      <td>False</td>
      <td>(0, 4, 1, 5)</td>
      <td>(2,)</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">[28.0, 63.25)</th>
      <th>[28.0, 29.0)</th>
      <td>28</td>
      <td>1.0</td>
      <td>9</td>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>vi.i2</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>mm7</td>
      <td>False</td>
      <td>True</td>
      <td>(-2, 0, -3, 1)</td>
      <td>()</td>
      <td>0</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>[29.0, 30.0)</th>
      <td>29</td>
      <td>1.0</td>
      <td>9</td>
      <td>9</td>
      <td>1/4</td>
      <td>1/4</td>
      <td>4/4</td>
      <td>3</td>
      <td>1</td>
      <td>iv2</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>mm7</td>
      <td>False</td>
      <td>True</td>
      <td>(-3, -1, -4, 0)</td>
      <td>()</td>
      <td>-1</td>
      <td>-3</td>
    </tr>
  </tbody>
</table>
<p>30 rows  29 columns</p>
</div></div></div>
</div>
<p>But also for any other facet requested:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">localkey_slices</span><span class="o">.</span><span class="n">get_facet</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>quarterbeats</th>
      <th>duration_qb</th>
      <th>mc</th>
      <th>mn</th>
      <th>mc_onset</th>
      <th>mn_onset</th>
      <th>timesig</th>
      <th>staff</th>
      <th>voice</th>
      <th>duration</th>
      <th>gracenote</th>
      <th>tremolo</th>
      <th>nominal_duration</th>
      <th>scalar</th>
      <th>tied</th>
      <th>tpc</th>
      <th>midi</th>
      <th>name</th>
      <th>octave</th>
      <th>chord_id</th>
    </tr>
    <tr>
      <th>corpus</th>
      <th>fname</th>
      <th>localkey_slice</th>
      <th>interval</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">ravel_piano</th>
      <th rowspan="5" valign="top">Ravel_-_Jeux_dEau</th>
      <th rowspan="5" valign="top">[0.0, 28.0)</th>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.50</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>4</td>
      <td>64</td>
      <td>E4</td>
      <td>4</td>
      <td>20</td>
    </tr>
    <tr>
      <th>[0.0, 0.5)</th>
      <td>0</td>
      <td>0.50</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>5</td>
      <td>71</td>
      <td>B4</td>
      <td>4</td>
      <td>20</td>
    </tr>
    <tr>
      <th>[0.0, 0.25)</th>
      <td>0</td>
      <td>0.25</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/16</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/16</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>9</td>
      <td>75</td>
      <td>D#5</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>[0.25, 0.5)</th>
      <td>1/4</td>
      <td>0.25</td>
      <td>1</td>
      <td>1</td>
      <td>1/16</td>
      <td>1/16</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/16</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/16</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>8</td>
      <td>80</td>
      <td>G#5</td>
      <td>5</td>
      <td>1</td>
    </tr>
    <tr>
      <th>[0.5, 1.0)</th>
      <td>1/2</td>
      <td>0.50</td>
      <td>1</td>
      <td>1</td>
      <td>1/8</td>
      <td>1/8</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/8</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>8</td>
      <td>68</td>
      <td>G#4</td>
      <td>4</td>
      <td>21</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">wagner_overtures</th>
      <th rowspan="5" valign="top">WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <th rowspan="5" valign="top">[600.0, 888.0)</th>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>1</td>
      <td>55</td>
      <td>G3</td>
      <td>3</td>
      <td>4130</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>2</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
      <td>60</td>
      <td>C4</td>
      <td>4</td>
      <td>4130</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>4</td>
      <td>64</td>
      <td>E4</td>
      <td>4</td>
      <td>4129</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>1</td>
      <td>67</td>
      <td>G4</td>
      <td>4</td>
      <td>4129</td>
    </tr>
    <tr>
      <th>[884.0, 886.0)</th>
      <td>884</td>
      <td>2.00</td>
      <td>222</td>
      <td>222</td>
      <td>0</td>
      <td>0</td>
      <td>4/4</td>
      <td>1</td>
      <td>1</td>
      <td>1/2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1/2</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
      <td>0</td>
      <td>72</td>
      <td>C5</td>
      <td>5</td>
      <td>4129</td>
    </tr>
  </tbody>
</table>
<p>24048 rows  20 columns</p>
</div></div></div>
</div>
<p>In both cases we see an additional index level <code class="docutils literal notranslate"><span class="pre">localkey_slice</span></code> containing the intervals of the localkey segments. Notes that originally overlapped a localkey boundary are now split in two with <code class="docutils literal notranslate"><span class="pre">duration_qb</span></code> values adapted (but not <code class="docutils literal notranslate"><span class="pre">duration</span></code> which keeps the original value).</p>
<p>However, we might be interested only in the slices themselves, so we can get the information stored in the field <code class="docutils literal notranslate"><span class="pre">slice_info</span></code> by calling:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">localkey_slices</span><span class="o">.</span><span class="n">get_slice_info</span><span class="p">()[[</span><span class="s1">&#39;duration_qb&#39;</span><span class="p">,</span> <span class="s1">&#39;globalkey&#39;</span><span class="p">,</span> <span class="s1">&#39;localkey&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>duration_qb</th>
      <th>globalkey</th>
      <th>localkey</th>
    </tr>
    <tr>
      <th>corpus</th>
      <th>fname</th>
      <th>localkey_slice</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="47" valign="top">ravel_piano</th>
      <th rowspan="15" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[0.0, 28.0)</th>
      <td>28.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[28.0, 63.25)</th>
      <td>35.25</td>
      <td>E</td>
      <td>vi</td>
    </tr>
    <tr>
      <th>[63.25, 83.25)</th>
      <td>20.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[83.25, 91.25)</th>
      <td>8.0</td>
      <td>E</td>
      <td>iii</td>
    </tr>
    <tr>
      <th>[91.25, 103.25)</th>
      <td>12.0</td>
      <td>E</td>
      <td>bI</td>
    </tr>
    <tr>
      <th>[103.25, 111.25)</th>
      <td>8.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[111.25, 117.25)</th>
      <td>6.0</td>
      <td>E</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[117.25, 134.25)</th>
      <td>17.0</td>
      <td>E</td>
      <td>IV</td>
    </tr>
    <tr>
      <th>[134.25, 141.25)</th>
      <td>7.0</td>
      <td>E</td>
      <td>bIII</td>
    </tr>
    <tr>
      <th>[141.25, 153.25)</th>
      <td>12.0</td>
      <td>E</td>
      <td>ii</td>
    </tr>
    <tr>
      <th>[153.25, 169.25)</th>
      <td>16.0</td>
      <td>E</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[169.25, 173.25)</th>
      <td>4.0</td>
      <td>E</td>
      <td>bV</td>
    </tr>
    <tr>
      <th>[173.25, 208.25)</th>
      <td>35.0</td>
      <td>E</td>
      <td>vi</td>
    </tr>
    <tr>
      <th>[208.25, 219.25)</th>
      <td>11.0</td>
      <td>E</td>
      <td>IV</td>
    </tr>
    <tr>
      <th>[219.25, 333.25)</th>
      <td>114.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th rowspan="15" valign="top">Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <th>[0.0, 20.0)</th>
      <td>20.0</td>
      <td>f#</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[20.0, 29.0)</th>
      <td>9.0</td>
      <td>f#</td>
      <td>vii</td>
    </tr>
    <tr>
      <th>[29.0, 43.0)</th>
      <td>14.0</td>
      <td>f#</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[43.0, 60.0)</th>
      <td>17.0</td>
      <td>f#</td>
      <td>III</td>
    </tr>
    <tr>
      <th>[60.0, 88.0)</th>
      <td>28.0</td>
      <td>f#</td>
      <td>bIV</td>
    </tr>
    <tr>
      <th>[88.0, 106.0)</th>
      <td>18.0</td>
      <td>f#</td>
      <td>ii</td>
    </tr>
    <tr>
      <th>[106.0, 151.0)</th>
      <td>45.0</td>
      <td>f#</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[151.0, 165.0)</th>
      <td>14.0</td>
      <td>f#</td>
      <td>v</td>
    </tr>
    <tr>
      <th>[165.0, 188.0)</th>
      <td>23.0</td>
      <td>f#</td>
      <td>bIV</td>
    </tr>
    <tr>
      <th>[188.0, 198.0)</th>
      <td>10.0</td>
      <td>f#</td>
      <td>bVII</td>
    </tr>
    <tr>
      <th>[198.0, 255.5)</th>
      <td>57.5</td>
      <td>f#</td>
      <td>iv</td>
    </tr>
    <tr>
      <th>[255.5, 270.0)</th>
      <td>14.5</td>
      <td>f#</td>
      <td>bii</td>
    </tr>
    <tr>
      <th>[270.0, 311.0)</th>
      <td>41.0</td>
      <td>f#</td>
      <td>bVII</td>
    </tr>
    <tr>
      <th>[311.0, 344.0)</th>
      <td>33.0</td>
      <td>f#</td>
      <td>iii</td>
    </tr>
    <tr>
      <th>[344.0, 380.0)</th>
      <td>36.0</td>
      <td>f#</td>
      <td>i</td>
    </tr>
    <tr>
      <th rowspan="17" valign="top">Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <th>[0.0, 33.0)</th>
      <td>33.0</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[33.0, 112.5)</th>
      <td>79.5</td>
      <td>D</td>
      <td>bVI</td>
    </tr>
    <tr>
      <th>[112.5, 135.0)</th>
      <td>22.5</td>
      <td>D</td>
      <td>bI</td>
    </tr>
    <tr>
      <th>[135.0, 165.0)</th>
      <td>30.0</td>
      <td>D</td>
      <td>vii</td>
    </tr>
    <tr>
      <th>[165.0, 237.0)</th>
      <td>72.0</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[237.0, 258.5)</th>
      <td>21.5</td>
      <td>D</td>
      <td>vi</td>
    </tr>
    <tr>
      <th>[258.5, 269.0)</th>
      <td>10.5</td>
      <td>D</td>
      <td>v</td>
    </tr>
    <tr>
      <th>[269.0, 297.5)</th>
      <td>28.5</td>
      <td>D</td>
      <td>IV</td>
    </tr>
    <tr>
      <th>[297.5, 467.0)</th>
      <td>169.5</td>
      <td>D</td>
      <td>iii</td>
    </tr>
    <tr>
      <th>[467.0, 536.0)</th>
      <td>69.0</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[536.0, 551.0)</th>
      <td>15.0</td>
      <td>D</td>
      <td>bII</td>
    </tr>
    <tr>
      <th>[551.0, 563.0)</th>
      <td>12.0</td>
      <td>D</td>
      <td>III</td>
    </tr>
    <tr>
      <th>[563.0, 566.0)</th>
      <td>3.0</td>
      <td>D</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[566.0, 599.0)</th>
      <td>33.0</td>
      <td>D</td>
      <td>VII</td>
    </tr>
    <tr>
      <th>[599.0, 671.75)</th>
      <td>72.75</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[671.75, 703.25)</th>
      <td>31.5</td>
      <td>D</td>
      <td>bvii</td>
    </tr>
    <tr>
      <th>[703.25, 738.75)</th>
      <td>35.5</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>sweelinck_keyboard</th>
      <th>SwWV258_fantasia_cromatica</th>
      <th>[0.0, 784.0)</th>
      <td>784.0</td>
      <td>d</td>
      <td>i</td>
    </tr>
    <tr>
      <th rowspan="12" valign="top">wagner_overtures</th>
      <th rowspan="4" valign="top">WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <th>[0.0, 126.5)</th>
      <td>126.5</td>
      <td>a</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[126.5, 209.0)</th>
      <td>82.5</td>
      <td>a</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[209.0, 282.5)</th>
      <td>73.5</td>
      <td>a</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[282.5, 333.5)</th>
      <td>51.0</td>
      <td>a</td>
      <td>iii</td>
    </tr>
    <tr>
      <th rowspan="8" valign="top">WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <th>[0.0, 58.0)</th>
      <td>58.0</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[58.0, 132.0)</th>
      <td>74.0</td>
      <td>C</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[132.0, 379.5)</th>
      <td>247.5</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[379.5, 432.0)</th>
      <td>52.5</td>
      <td>C</td>
      <td>III</td>
    </tr>
    <tr>
      <th>[432.0, 464.0)</th>
      <td>32.0</td>
      <td>C</td>
      <td>VI</td>
    </tr>
    <tr>
      <th>[464.0, 484.0)</th>
      <td>20.0</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[484.0, 600.0)</th>
      <td>116.0</td>
      <td>C</td>
      <td>bIII</td>
    </tr>
    <tr>
      <th>[600.0, 888.0)</th>
      <td>288.0</td>
      <td>C</td>
      <td>I</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="applying-a-grouper">
<h3>Applying a Grouper<a class="headerlink" href="#applying-a-grouper" title="Permalink to this heading">#</a></h3>
<p>If, for example, we want to analyse localkey segments separately depending on whether they are in major or minor, we could apply a <code class="docutils literal notranslate"><span class="pre">ModeGrouper</span></code>, which can only applied to a Dataset that has already been sliced:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped_localkey_slices</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">ModeGrouper</span><span class="p">()</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">localkey_slices</span><span class="p">)</span>
<span class="n">grouped_localkey_slices</span><span class="o">.</span><span class="n">get_slice_info</span><span class="p">()[[</span><span class="s1">&#39;duration_qb&#39;</span><span class="p">,</span> <span class="s1">&#39;globalkey&#39;</span><span class="p">,</span> <span class="s1">&#39;localkey&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>duration_qb</th>
      <th>globalkey</th>
      <th>localkey</th>
    </tr>
    <tr>
      <th>localkey_is_minor</th>
      <th>corpus</th>
      <th>fname</th>
      <th>localkey_slice</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="38" valign="top">False</th>
      <th rowspan="29" valign="top">ravel_piano</th>
      <th rowspan="11" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[0.0, 28.0)</th>
      <td>28.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[63.25, 83.25)</th>
      <td>20.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[91.25, 103.25)</th>
      <td>12.0</td>
      <td>E</td>
      <td>bI</td>
    </tr>
    <tr>
      <th>[103.25, 111.25)</th>
      <td>8.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[111.25, 117.25)</th>
      <td>6.0</td>
      <td>E</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[117.25, 134.25)</th>
      <td>17.0</td>
      <td>E</td>
      <td>IV</td>
    </tr>
    <tr>
      <th>[134.25, 141.25)</th>
      <td>7.0</td>
      <td>E</td>
      <td>bIII</td>
    </tr>
    <tr>
      <th>[153.25, 169.25)</th>
      <td>16.0</td>
      <td>E</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[169.25, 173.25)</th>
      <td>4.0</td>
      <td>E</td>
      <td>bV</td>
    </tr>
    <tr>
      <th>[208.25, 219.25)</th>
      <td>11.0</td>
      <td>E</td>
      <td>IV</td>
    </tr>
    <tr>
      <th>[219.25, 333.25)</th>
      <td>114.0</td>
      <td>E</td>
      <td>I</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <th>[43.0, 60.0)</th>
      <td>17.0</td>
      <td>f#</td>
      <td>III</td>
    </tr>
    <tr>
      <th>[60.0, 88.0)</th>
      <td>28.0</td>
      <td>f#</td>
      <td>bIV</td>
    </tr>
    <tr>
      <th>[106.0, 151.0)</th>
      <td>45.0</td>
      <td>f#</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[165.0, 188.0)</th>
      <td>23.0</td>
      <td>f#</td>
      <td>bIV</td>
    </tr>
    <tr>
      <th>[188.0, 198.0)</th>
      <td>10.0</td>
      <td>f#</td>
      <td>bVII</td>
    </tr>
    <tr>
      <th>[270.0, 311.0)</th>
      <td>41.0</td>
      <td>f#</td>
      <td>bVII</td>
    </tr>
    <tr>
      <th rowspan="12" valign="top">Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <th>[0.0, 33.0)</th>
      <td>33.0</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[33.0, 112.5)</th>
      <td>79.5</td>
      <td>D</td>
      <td>bVI</td>
    </tr>
    <tr>
      <th>[112.5, 135.0)</th>
      <td>22.5</td>
      <td>D</td>
      <td>bI</td>
    </tr>
    <tr>
      <th>[165.0, 237.0)</th>
      <td>72.0</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[269.0, 297.5)</th>
      <td>28.5</td>
      <td>D</td>
      <td>IV</td>
    </tr>
    <tr>
      <th>[467.0, 536.0)</th>
      <td>69.0</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[536.0, 551.0)</th>
      <td>15.0</td>
      <td>D</td>
      <td>bII</td>
    </tr>
    <tr>
      <th>[551.0, 563.0)</th>
      <td>12.0</td>
      <td>D</td>
      <td>III</td>
    </tr>
    <tr>
      <th>[563.0, 566.0)</th>
      <td>3.0</td>
      <td>D</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[566.0, 599.0)</th>
      <td>33.0</td>
      <td>D</td>
      <td>VII</td>
    </tr>
    <tr>
      <th>[599.0, 671.75)</th>
      <td>72.75</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[703.25, 738.75)</th>
      <td>35.5</td>
      <td>D</td>
      <td>I</td>
    </tr>
    <tr>
      <th rowspan="9" valign="top">wagner_overtures</th>
      <th>WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <th>[126.5, 209.0)</th>
      <td>82.5</td>
      <td>a</td>
      <td>I</td>
    </tr>
    <tr>
      <th rowspan="8" valign="top">WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <th>[0.0, 58.0)</th>
      <td>58.0</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[58.0, 132.0)</th>
      <td>74.0</td>
      <td>C</td>
      <td>V</td>
    </tr>
    <tr>
      <th>[132.0, 379.5)</th>
      <td>247.5</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[379.5, 432.0)</th>
      <td>52.5</td>
      <td>C</td>
      <td>III</td>
    </tr>
    <tr>
      <th>[432.0, 464.0)</th>
      <td>32.0</td>
      <td>C</td>
      <td>VI</td>
    </tr>
    <tr>
      <th>[464.0, 484.0)</th>
      <td>20.0</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th>[484.0, 600.0)</th>
      <td>116.0</td>
      <td>C</td>
      <td>bIII</td>
    </tr>
    <tr>
      <th>[600.0, 888.0)</th>
      <td>288.0</td>
      <td>C</td>
      <td>I</td>
    </tr>
    <tr>
      <th rowspan="22" valign="top">True</th>
      <th rowspan="18" valign="top">ravel_piano</th>
      <th rowspan="4" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[28.0, 63.25)</th>
      <td>35.25</td>
      <td>E</td>
      <td>vi</td>
    </tr>
    <tr>
      <th>[83.25, 91.25)</th>
      <td>8.0</td>
      <td>E</td>
      <td>iii</td>
    </tr>
    <tr>
      <th>[141.25, 153.25)</th>
      <td>12.0</td>
      <td>E</td>
      <td>ii</td>
    </tr>
    <tr>
      <th>[173.25, 208.25)</th>
      <td>35.0</td>
      <td>E</td>
      <td>vi</td>
    </tr>
    <tr>
      <th rowspan="9" valign="top">Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <th>[0.0, 20.0)</th>
      <td>20.0</td>
      <td>f#</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[20.0, 29.0)</th>
      <td>9.0</td>
      <td>f#</td>
      <td>vii</td>
    </tr>
    <tr>
      <th>[29.0, 43.0)</th>
      <td>14.0</td>
      <td>f#</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[88.0, 106.0)</th>
      <td>18.0</td>
      <td>f#</td>
      <td>ii</td>
    </tr>
    <tr>
      <th>[151.0, 165.0)</th>
      <td>14.0</td>
      <td>f#</td>
      <td>v</td>
    </tr>
    <tr>
      <th>[198.0, 255.5)</th>
      <td>57.5</td>
      <td>f#</td>
      <td>iv</td>
    </tr>
    <tr>
      <th>[255.5, 270.0)</th>
      <td>14.5</td>
      <td>f#</td>
      <td>bii</td>
    </tr>
    <tr>
      <th>[311.0, 344.0)</th>
      <td>33.0</td>
      <td>f#</td>
      <td>iii</td>
    </tr>
    <tr>
      <th>[344.0, 380.0)</th>
      <td>36.0</td>
      <td>f#</td>
      <td>i</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <th>[135.0, 165.0)</th>
      <td>30.0</td>
      <td>D</td>
      <td>vii</td>
    </tr>
    <tr>
      <th>[237.0, 258.5)</th>
      <td>21.5</td>
      <td>D</td>
      <td>vi</td>
    </tr>
    <tr>
      <th>[258.5, 269.0)</th>
      <td>10.5</td>
      <td>D</td>
      <td>v</td>
    </tr>
    <tr>
      <th>[297.5, 467.0)</th>
      <td>169.5</td>
      <td>D</td>
      <td>iii</td>
    </tr>
    <tr>
      <th>[671.75, 703.25)</th>
      <td>31.5</td>
      <td>D</td>
      <td>bvii</td>
    </tr>
    <tr>
      <th>sweelinck_keyboard</th>
      <th>SwWV258_fantasia_cromatica</th>
      <th>[0.0, 784.0)</th>
      <td>784.0</td>
      <td>d</td>
      <td>i</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">wagner_overtures</th>
      <th rowspan="3" valign="top">WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <th>[0.0, 126.5)</th>
      <td>126.5</td>
      <td>a</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[209.0, 282.5)</th>
      <td>73.5</td>
      <td>a</td>
      <td>i</td>
    </tr>
    <tr>
      <th>[282.5, 333.5)</th>
      <td>51.0</td>
      <td>a</td>
      <td>iii</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The grouping is displayed as the prepended index level <code class="docutils literal notranslate"><span class="pre">localkey_is_minor</span></code>. In this case the groups are simply called <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>, as can be seen by inspecting the <code class="docutils literal notranslate"><span class="pre">.indices</span></code> dictionary. The keys are tuples whose lengths match the number of applied Groupers so far.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">grouped_localkey_slices</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(False,), (True,)]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="applying-an-analyzer">
<h2>Applying an Analyzer<a class="headerlink" href="#applying-an-analyzer" title="Permalink to this heading">#</a></h2>
<p>After having seen the various ways how a Dataset can be reshaped, let us have a look how the various transformations change the result of an analyzer.
To that aim, lets first initialize the <code class="docutils literal notranslate"><span class="pre">PitchClassVectors</span></code> analyzer with the desired configuration:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pcv_analyzer</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">PitchClassVectors</span><span class="p">(</span><span class="n">pitch_class_format</span><span class="o">=</span><span class="s1">&#39;pc&#39;</span><span class="p">,</span>
                                    <span class="n">weight_grace_durations</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                                    <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">include_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We want to</p>
<ul class="simple">
<li><p>see pitch classes 0-12 (as opposed to the defautl <code class="docutils literal notranslate"><span class="pre">tpc</span></code>, i.e. tonal pitch classes on the line of fifth),</p></li>
<li><p>include grace notes, which usually have duration 0, by halving their note values,</p></li>
<li><p>normalize the resulting vectors, and</p></li>
<li><p>include zero vectors where no notes occur (i.e. for completely silent segments).</p></li>
</ul>
<p>We start by applying this analyzer to the filtered dataset, in which all pieces are excluded that do not contain annotations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">annotated_pieces_pcvs</span> <span class="o">=</span> <span class="n">pcv_analyzer</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">annotated</span><span class="p">)</span>
<span class="n">annotated_pieces_pcvs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pc</th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
    </tr>
    <tr>
      <th>corpus</th>
      <th>fname</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">ravel_piano</th>
      <th>Ravel_-_Jeux_dEau</th>
      <td>0.046410</td>
      <td>0.129091</td>
      <td>0.056510</td>
      <td>0.074744</td>
      <td>0.111993</td>
      <td>0.037309</td>
      <td>0.098054</td>
      <td>0.046840</td>
      <td>0.149206</td>
      <td>0.093288</td>
      <td>0.067010</td>
      <td>0.089544</td>
    </tr>
    <tr>
      <th>Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <td>0.043934</td>
      <td>0.110328</td>
      <td>0.067653</td>
      <td>0.066722</td>
      <td>0.080202</td>
      <td>0.075548</td>
      <td>0.074817</td>
      <td>0.096710</td>
      <td>0.108612</td>
      <td>0.139556</td>
      <td>0.076821</td>
      <td>0.059096</td>
    </tr>
    <tr>
      <th>Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <td>0.022928</td>
      <td>0.106743</td>
      <td>0.086626</td>
      <td>0.038571</td>
      <td>0.045122</td>
      <td>0.104775</td>
      <td>0.123577</td>
      <td>0.143196</td>
      <td>0.037739</td>
      <td>0.139890</td>
      <td>0.066913</td>
      <td>0.083920</td>
    </tr>
    <tr>
      <th>sweelinck_keyboard</th>
      <th>SwWV258_fantasia_cromatica</th>
      <td>0.092691</td>
      <td>0.033467</td>
      <td>0.176324</td>
      <td>0.003596</td>
      <td>0.143756</td>
      <td>0.078372</td>
      <td>0.035531</td>
      <td>0.097802</td>
      <td>0.019580</td>
      <td>0.210473</td>
      <td>0.034216</td>
      <td>0.074192</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">wagner_overtures</th>
      <th>WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <td>0.076676</td>
      <td>0.059301</td>
      <td>0.093802</td>
      <td>0.070352</td>
      <td>0.097303</td>
      <td>0.087430</td>
      <td>0.083905</td>
      <td>0.082508</td>
      <td>0.098472</td>
      <td>0.099303</td>
      <td>0.035735</td>
      <td>0.115212</td>
    </tr>
    <tr>
      <th>WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <td>0.154280</td>
      <td>0.022772</td>
      <td>0.106978</td>
      <td>0.028599</td>
      <td>0.123468</td>
      <td>0.091003</td>
      <td>0.043869</td>
      <td>0.169370</td>
      <td>0.029012</td>
      <td>0.130671</td>
      <td>0.021254</td>
      <td>0.078725</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Applying the same analyzer to the Dataset sliced by localkey segments yields one vector per segment:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">localkey_segment_pcvs</span> <span class="o">=</span> <span class="n">pcv_analyzer</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">localkey_slices</span><span class="p">)</span>
<span class="n">localkey_segment_pcvs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>pc</th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
    </tr>
    <tr>
      <th>corpus</th>
      <th>fname</th>
      <th>localkey_slice</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="47" valign="top">ravel_piano</th>
      <th rowspan="15" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[0.0, 28.0)</th>
      <td>0.044586</td>
      <td>0.063694</td>
      <td>0.040764</td>
      <td>0.084713</td>
      <td>0.166879</td>
      <td>0.015924</td>
      <td>0.048408</td>
      <td>0.014013</td>
      <td>0.237580</td>
      <td>0.073248</td>
      <td>0.104459</td>
      <td>0.105732</td>
    </tr>
    <tr>
      <th>[28.0, 63.25)</th>
      <td>NaN</td>
      <td>0.340974</td>
      <td>0.045436</td>
      <td>0.024560</td>
      <td>0.064675</td>
      <td>NaN</td>
      <td>0.102333</td>
      <td>NaN</td>
      <td>0.286942</td>
      <td>0.070405</td>
      <td>NaN</td>
      <td>0.064675</td>
    </tr>
    <tr>
      <th>[63.25, 83.25)</th>
      <td>NaN</td>
      <td>0.246459</td>
      <td>NaN</td>
      <td>0.050992</td>
      <td>0.160529</td>
      <td>NaN</td>
      <td>0.194523</td>
      <td>NaN</td>
      <td>0.096317</td>
      <td>0.131256</td>
      <td>NaN</td>
      <td>0.119924</td>
    </tr>
    <tr>
      <th>[83.25, 91.25)</th>
      <td>NaN</td>
      <td>0.123077</td>
      <td>0.076923</td>
      <td>0.169231</td>
      <td>0.123077</td>
      <td>0.076923</td>
      <td>NaN</td>
      <td>0.107692</td>
      <td>NaN</td>
      <td>0.153846</td>
      <td>0.076923</td>
      <td>0.092308</td>
    </tr>
    <tr>
      <th>[91.25, 103.25)</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.164179</td>
      <td>0.310448</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.286567</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.238806</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[103.25, 111.25)</th>
      <td>0.031250</td>
      <td>0.187500</td>
      <td>NaN</td>
      <td>0.140625</td>
      <td>0.015625</td>
      <td>0.109375</td>
      <td>0.078125</td>
      <td>0.015625</td>
      <td>0.140625</td>
      <td>0.093750</td>
      <td>0.062500</td>
      <td>0.125000</td>
    </tr>
    <tr>
      <th>[111.25, 117.25)</th>
      <td>0.107143</td>
      <td>0.053571</td>
      <td>NaN</td>
      <td>0.089286</td>
      <td>0.098214</td>
      <td>NaN</td>
      <td>0.223214</td>
      <td>NaN</td>
      <td>0.241071</td>
      <td>NaN</td>
      <td>0.187500</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[117.25, 134.25)</th>
      <td>NaN</td>
      <td>0.041152</td>
      <td>0.187929</td>
      <td>NaN</td>
      <td>0.086420</td>
      <td>0.107682</td>
      <td>0.106996</td>
      <td>NaN</td>
      <td>0.152263</td>
      <td>NaN</td>
      <td>0.189986</td>
      <td>0.127572</td>
    </tr>
    <tr>
      <th>[134.25, 141.25)</th>
      <td>0.084507</td>
      <td>0.021127</td>
      <td>0.131455</td>
      <td>0.091549</td>
      <td>0.007042</td>
      <td>0.056338</td>
      <td>0.119718</td>
      <td>0.211268</td>
      <td>0.011737</td>
      <td>NaN</td>
      <td>0.133803</td>
      <td>0.131455</td>
    </tr>
    <tr>
      <th>[141.25, 153.25)</th>
      <td>NaN</td>
      <td>0.234714</td>
      <td>0.136095</td>
      <td>0.011834</td>
      <td>0.100592</td>
      <td>0.169625</td>
      <td>0.005917</td>
      <td>0.071006</td>
      <td>0.041420</td>
      <td>0.005917</td>
      <td>0.005917</td>
      <td>0.216963</td>
    </tr>
    <tr>
      <th>[153.25, 169.25)</th>
      <td>0.090143</td>
      <td>0.113489</td>
      <td>0.003891</td>
      <td>0.015564</td>
      <td>0.156291</td>
      <td>0.027886</td>
      <td>0.117380</td>
      <td>0.171855</td>
      <td>0.036965</td>
      <td>0.054475</td>
      <td>0.194553</td>
      <td>0.017510</td>
    </tr>
    <tr>
      <th>[169.25, 173.25)</th>
      <td>0.265625</td>
      <td>NaN</td>
      <td>0.187500</td>
      <td>0.182292</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.054688</td>
      <td>0.080729</td>
      <td>NaN</td>
      <td>0.166667</td>
      <td>0.062500</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[173.25, 208.25)</th>
      <td>0.103016</td>
      <td>0.085155</td>
      <td>0.090873</td>
      <td>0.139992</td>
      <td>0.004700</td>
      <td>0.075206</td>
      <td>0.123541</td>
      <td>0.010967</td>
      <td>0.103564</td>
      <td>0.153153</td>
      <td>0.096514</td>
      <td>0.013318</td>
    </tr>
    <tr>
      <th>[208.25, 219.25)</th>
      <td>0.054054</td>
      <td>0.009009</td>
      <td>0.184685</td>
      <td>0.031532</td>
      <td>0.166667</td>
      <td>0.063063</td>
      <td>NaN</td>
      <td>0.054054</td>
      <td>0.193694</td>
      <td>0.018018</td>
      <td>0.009009</td>
      <td>0.216216</td>
    </tr>
    <tr>
      <th>[219.25, 333.25)</th>
      <td>0.053616</td>
      <td>0.114125</td>
      <td>0.023626</td>
      <td>0.059267</td>
      <td>0.152528</td>
      <td>0.022980</td>
      <td>0.105227</td>
      <td>0.037444</td>
      <td>0.177119</td>
      <td>0.128265</td>
      <td>0.022017</td>
      <td>0.103786</td>
    </tr>
    <tr>
      <th rowspan="15" valign="top">Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <th>[0.0, 20.0)</th>
      <td>NaN</td>
      <td>0.327485</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.228070</td>
      <td>NaN</td>
      <td>0.095906</td>
      <td>NaN</td>
      <td>0.223392</td>
      <td>0.125146</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[20.0, 29.0)</th>
      <td>0.049536</td>
      <td>NaN</td>
      <td>0.154283</td>
      <td>NaN</td>
      <td>0.206605</td>
      <td>0.076780</td>
      <td>0.074303</td>
      <td>0.105263</td>
      <td>0.012384</td>
      <td>0.147472</td>
      <td>NaN</td>
      <td>0.173375</td>
    </tr>
    <tr>
      <th>[29.0, 43.0)</th>
      <td>NaN</td>
      <td>0.313015</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.232290</td>
      <td>NaN</td>
      <td>0.100494</td>
      <td>NaN</td>
      <td>0.230643</td>
      <td>0.123558</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[43.0, 60.0)</th>
      <td>NaN</td>
      <td>0.128290</td>
      <td>0.189660</td>
      <td>NaN</td>
      <td>0.088476</td>
      <td>NaN</td>
      <td>0.124751</td>
      <td>0.194663</td>
      <td>0.053086</td>
      <td>0.101747</td>
      <td>NaN</td>
      <td>0.119327</td>
    </tr>
    <tr>
      <th>[60.0, 88.0)</th>
      <td>0.095991</td>
      <td>0.032675</td>
      <td>0.116315</td>
      <td>0.051523</td>
      <td>0.120334</td>
      <td>0.072866</td>
      <td>0.073554</td>
      <td>0.055419</td>
      <td>0.126318</td>
      <td>0.015630</td>
      <td>0.174737</td>
      <td>0.064639</td>
    </tr>
    <tr>
      <th>[88.0, 106.0)</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.048309</td>
      <td>0.259337</td>
      <td>NaN</td>
      <td>0.195652</td>
      <td>0.050725</td>
      <td>NaN</td>
      <td>0.129796</td>
      <td>0.010870</td>
      <td>NaN</td>
      <td>0.305312</td>
    </tr>
    <tr>
      <th>[106.0, 151.0)</th>
      <td>0.049602</td>
      <td>0.094801</td>
      <td>NaN</td>
      <td>0.057234</td>
      <td>0.028034</td>
      <td>0.132937</td>
      <td>0.054596</td>
      <td>0.050112</td>
      <td>0.313184</td>
      <td>0.095477</td>
      <td>0.084031</td>
      <td>0.039992</td>
    </tr>
    <tr>
      <th>[151.0, 165.0)</th>
      <td>NaN</td>
      <td>0.102521</td>
      <td>NaN</td>
      <td>0.235294</td>
      <td>0.126050</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.299160</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.236975</td>
    </tr>
    <tr>
      <th>[165.0, 188.0)</th>
      <td>0.020136</td>
      <td>0.014214</td>
      <td>0.175300</td>
      <td>0.030796</td>
      <td>0.019346</td>
      <td>0.339940</td>
      <td>NaN</td>
      <td>0.262950</td>
      <td>0.055275</td>
      <td>NaN</td>
      <td>0.066251</td>
      <td>0.015793</td>
    </tr>
    <tr>
      <th>[188.0, 198.0)</th>
      <td>0.056852</td>
      <td>NaN</td>
      <td>0.150620</td>
      <td>0.050797</td>
      <td>NaN</td>
      <td>0.023184</td>
      <td>0.030124</td>
      <td>0.180744</td>
      <td>0.085942</td>
      <td>0.030124</td>
      <td>0.391613</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[198.0, 255.5)</th>
      <td>0.079374</td>
      <td>0.018521</td>
      <td>0.102856</td>
      <td>0.011906</td>
      <td>NaN</td>
      <td>0.041010</td>
      <td>0.259358</td>
      <td>NaN</td>
      <td>0.021166</td>
      <td>0.386436</td>
      <td>0.015875</td>
      <td>0.063499</td>
    </tr>
    <tr>
      <th>[255.5, 270.0)</th>
      <td>0.027119</td>
      <td>NaN</td>
      <td>0.244068</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.054237</td>
      <td>0.044068</td>
      <td>0.189831</td>
      <td>NaN</td>
      <td>0.345763</td>
      <td>0.094915</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[270.0, 311.0)</th>
      <td>0.011603</td>
      <td>0.184231</td>
      <td>0.002048</td>
      <td>0.219398</td>
      <td>0.011603</td>
      <td>0.049141</td>
      <td>NaN</td>
      <td>0.160023</td>
      <td>NaN</td>
      <td>0.223816</td>
      <td>0.138137</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[311.0, 344.0)</th>
      <td>0.135647</td>
      <td>0.115280</td>
      <td>NaN</td>
      <td>0.020156</td>
      <td>0.150102</td>
      <td>0.063593</td>
      <td>0.095390</td>
      <td>0.177895</td>
      <td>NaN</td>
      <td>0.174205</td>
      <td>0.021198</td>
      <td>0.046535</td>
    </tr>
    <tr>
      <th>[344.0, 380.0)</th>
      <td>NaN</td>
      <td>0.266034</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.134459</td>
      <td>0.065823</td>
      <td>0.060197</td>
      <td>0.121519</td>
      <td>0.171111</td>
      <td>0.070675</td>
      <td>0.027004</td>
      <td>0.083179</td>
    </tr>
    <tr>
      <th rowspan="17" valign="top">Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <th>[0.0, 33.0)</th>
      <td>0.043584</td>
      <td>0.019370</td>
      <td>0.355932</td>
      <td>0.116223</td>
      <td>NaN</td>
      <td>0.043584</td>
      <td>0.094431</td>
      <td>0.038741</td>
      <td>0.029056</td>
      <td>0.242131</td>
      <td>0.002421</td>
      <td>0.014528</td>
    </tr>
    <tr>
      <th>[33.0, 112.5)</th>
      <td>0.035562</td>
      <td>0.012802</td>
      <td>0.140114</td>
      <td>0.104552</td>
      <td>0.004267</td>
      <td>0.149502</td>
      <td>0.076387</td>
      <td>0.081081</td>
      <td>0.012802</td>
      <td>0.054054</td>
      <td>0.292603</td>
      <td>0.036273</td>
    </tr>
    <tr>
      <th>[112.5, 135.0)</th>
      <td>0.026504</td>
      <td>0.191641</td>
      <td>0.085627</td>
      <td>0.045872</td>
      <td>NaN</td>
      <td>0.115189</td>
      <td>0.140673</td>
      <td>0.012232</td>
      <td>0.122324</td>
      <td>0.180428</td>
      <td>0.079511</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[135.0, 165.0)</th>
      <td>0.041439</td>
      <td>0.080646</td>
      <td>0.013813</td>
      <td>0.204962</td>
      <td>0.034426</td>
      <td>NaN</td>
      <td>0.018647</td>
      <td>0.008925</td>
      <td>0.519365</td>
      <td>0.017851</td>
      <td>NaN</td>
      <td>0.059927</td>
    </tr>
    <tr>
      <th>[165.0, 237.0)</th>
      <td>0.022599</td>
      <td>0.074388</td>
      <td>0.184087</td>
      <td>0.016949</td>
      <td>0.033427</td>
      <td>0.056497</td>
      <td>0.161959</td>
      <td>0.076271</td>
      <td>0.071563</td>
      <td>0.156309</td>
      <td>0.011299</td>
      <td>0.134652</td>
    </tr>
    <tr>
      <th>[237.0, 258.5)</th>
      <td>NaN</td>
      <td>0.128065</td>
      <td>0.209809</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.250681</td>
      <td>0.010899</td>
      <td>NaN</td>
      <td>0.272480</td>
      <td>NaN</td>
      <td>0.128065</td>
    </tr>
    <tr>
      <th>[258.5, 269.0)</th>
      <td>0.166667</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.233333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.246667</td>
      <td>NaN</td>
      <td>0.353333</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[269.0, 297.5)</th>
      <td>0.006390</td>
      <td>0.010650</td>
      <td>0.189563</td>
      <td>NaN</td>
      <td>0.161874</td>
      <td>NaN</td>
      <td>0.056443</td>
      <td>0.235357</td>
      <td>NaN</td>
      <td>0.238552</td>
      <td>NaN</td>
      <td>0.101171</td>
    </tr>
    <tr>
      <th>[297.5, 467.0)</th>
      <td>0.002597</td>
      <td>0.152273</td>
      <td>0.019805</td>
      <td>0.001299</td>
      <td>0.061364</td>
      <td>0.218506</td>
      <td>0.161851</td>
      <td>0.252273</td>
      <td>0.007955</td>
      <td>0.043344</td>
      <td>0.036797</td>
      <td>0.041937</td>
    </tr>
    <tr>
      <th>[467.0, 536.0)</th>
      <td>0.005073</td>
      <td>0.072294</td>
      <td>0.059188</td>
      <td>0.023675</td>
      <td>0.010147</td>
      <td>0.010569</td>
      <td>0.107384</td>
      <td>0.098506</td>
      <td>0.003382</td>
      <td>0.337091</td>
      <td>0.059893</td>
      <td>0.212796</td>
    </tr>
    <tr>
      <th>[536.0, 551.0)</th>
      <td>0.014706</td>
      <td>0.029412</td>
      <td>NaN</td>
      <td>0.250000</td>
      <td>0.029412</td>
      <td>0.014706</td>
      <td>0.029412</td>
      <td>0.161765</td>
      <td>NaN</td>
      <td>0.058824</td>
      <td>0.294118</td>
      <td>0.117647</td>
    </tr>
    <tr>
      <th>[551.0, 563.0)</th>
      <td>0.051948</td>
      <td>0.318182</td>
      <td>0.071429</td>
      <td>0.019481</td>
      <td>0.038961</td>
      <td>0.012987</td>
      <td>0.292208</td>
      <td>NaN</td>
      <td>0.019481</td>
      <td>0.025974</td>
      <td>0.149351</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[563.0, 566.0)</th>
      <td>NaN</td>
      <td>0.156250</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.312500</td>
      <td>0.093750</td>
      <td>0.093750</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.250000</td>
      <td>NaN</td>
      <td>0.093750</td>
    </tr>
    <tr>
      <th>[566.0, 599.0)</th>
      <td>0.054317</td>
      <td>0.343643</td>
      <td>0.068063</td>
      <td>NaN</td>
      <td>0.057754</td>
      <td>0.123390</td>
      <td>NaN</td>
      <td>0.064207</td>
      <td>0.158076</td>
      <td>0.062908</td>
      <td>NaN</td>
      <td>0.067643</td>
    </tr>
    <tr>
      <th>[599.0, 671.75)</th>
      <td>0.031898</td>
      <td>0.097156</td>
      <td>0.089048</td>
      <td>0.064294</td>
      <td>0.046850</td>
      <td>0.033892</td>
      <td>0.111809</td>
      <td>0.091374</td>
      <td>0.049841</td>
      <td>0.177931</td>
      <td>0.056818</td>
      <td>0.149090</td>
    </tr>
    <tr>
      <th>[671.75, 703.25)</th>
      <td>0.038116</td>
      <td>0.070683</td>
      <td>0.040161</td>
      <td>0.115225</td>
      <td>0.031325</td>
      <td>0.133333</td>
      <td>0.054728</td>
      <td>0.139759</td>
      <td>0.074699</td>
      <td>0.068839</td>
      <td>0.090964</td>
      <td>0.142169</td>
    </tr>
    <tr>
      <th>[703.25, 738.75)</th>
      <td>0.035456</td>
      <td>0.127380</td>
      <td>0.175968</td>
      <td>0.029547</td>
      <td>0.021668</td>
      <td>0.036770</td>
      <td>0.172685</td>
      <td>0.143795</td>
      <td>0.029547</td>
      <td>0.151018</td>
      <td>0.072226</td>
      <td>0.003940</td>
    </tr>
    <tr>
      <th>sweelinck_keyboard</th>
      <th>SwWV258_fantasia_cromatica</th>
      <th>[0.0, 784.0)</th>
      <td>0.092691</td>
      <td>0.033467</td>
      <td>0.176324</td>
      <td>0.003596</td>
      <td>0.143756</td>
      <td>0.078372</td>
      <td>0.035531</td>
      <td>0.097802</td>
      <td>0.019580</td>
      <td>0.210473</td>
      <td>0.034216</td>
      <td>0.074192</td>
    </tr>
    <tr>
      <th rowspan="12" valign="top">wagner_overtures</th>
      <th rowspan="4" valign="top">WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <th>[0.0, 126.5)</th>
      <td>0.087606</td>
      <td>0.066803</td>
      <td>0.080867</td>
      <td>0.072663</td>
      <td>0.083211</td>
      <td>0.081453</td>
      <td>0.104893</td>
      <td>0.067975</td>
      <td>0.071784</td>
      <td>0.128919</td>
      <td>0.035746</td>
      <td>0.118078</td>
    </tr>
    <tr>
      <th>[126.5, 209.0)</th>
      <td>0.062151</td>
      <td>0.086080</td>
      <td>0.096811</td>
      <td>0.065642</td>
      <td>0.159125</td>
      <td>0.033752</td>
      <td>0.098510</td>
      <td>0.046369</td>
      <td>0.089851</td>
      <td>0.126513</td>
      <td>0.028166</td>
      <td>0.107030</td>
    </tr>
    <tr>
      <th>[209.0, 282.5)</th>
      <td>0.097770</td>
      <td>0.024190</td>
      <td>0.114429</td>
      <td>0.075148</td>
      <td>0.085949</td>
      <td>0.127819</td>
      <td>0.064788</td>
      <td>0.073506</td>
      <td>0.105859</td>
      <td>0.063308</td>
      <td>0.050362</td>
      <td>0.116871</td>
    </tr>
    <tr>
      <th>[282.5, 333.5)</th>
      <td>0.042587</td>
      <td>0.041009</td>
      <td>0.085174</td>
      <td>0.066246</td>
      <td>0.015773</td>
      <td>0.152997</td>
      <td>0.028391</td>
      <td>0.219243</td>
      <td>0.176656</td>
      <td>0.022082</td>
      <td>0.026814</td>
      <td>0.123028</td>
    </tr>
    <tr>
      <th rowspan="8" valign="top">WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <th>[0.0, 58.0)</th>
      <td>0.168059</td>
      <td>0.018570</td>
      <td>0.116992</td>
      <td>NaN</td>
      <td>0.121634</td>
      <td>0.134633</td>
      <td>0.007428</td>
      <td>0.202414</td>
      <td>0.007428</td>
      <td>0.133705</td>
      <td>0.011142</td>
      <td>0.077994</td>
    </tr>
    <tr>
      <th>[58.0, 132.0)</th>
      <td>0.152434</td>
      <td>0.004789</td>
      <td>0.150838</td>
      <td>0.022346</td>
      <td>0.095770</td>
      <td>0.033520</td>
      <td>0.095770</td>
      <td>0.187151</td>
      <td>0.028731</td>
      <td>0.120112</td>
      <td>0.003192</td>
      <td>0.105347</td>
    </tr>
    <tr>
      <th>[132.0, 379.5)</th>
      <td>0.157891</td>
      <td>0.013827</td>
      <td>0.100756</td>
      <td>0.017367</td>
      <td>0.144314</td>
      <td>0.084528</td>
      <td>0.035177</td>
      <td>0.189779</td>
      <td>0.017257</td>
      <td>0.138901</td>
      <td>0.009440</td>
      <td>0.090763</td>
    </tr>
    <tr>
      <th>[379.5, 432.0)</th>
      <td>0.043263</td>
      <td>0.132880</td>
      <td>0.011125</td>
      <td>0.078286</td>
      <td>0.156366</td>
      <td>0.036671</td>
      <td>0.168521</td>
      <td>0.009889</td>
      <td>0.075814</td>
      <td>0.112897</td>
      <td>0.075402</td>
      <td>0.098888</td>
    </tr>
    <tr>
      <th>[432.0, 464.0)</th>
      <td>0.008230</td>
      <td>0.106996</td>
      <td>0.158436</td>
      <td>0.038409</td>
      <td>0.134431</td>
      <td>0.019204</td>
      <td>0.124486</td>
      <td>0.028807</td>
      <td>0.060357</td>
      <td>0.159465</td>
      <td>0.012346</td>
      <td>0.148834</td>
    </tr>
    <tr>
      <th>[464.0, 484.0)</th>
      <td>0.134363</td>
      <td>0.031835</td>
      <td>0.096910</td>
      <td>0.059925</td>
      <td>0.069288</td>
      <td>0.110487</td>
      <td>0.084270</td>
      <td>0.211610</td>
      <td>0.028090</td>
      <td>0.099251</td>
      <td>0.011236</td>
      <td>0.062734</td>
    </tr>
    <tr>
      <th>[484.0, 600.0)</th>
      <td>0.146650</td>
      <td>0.023975</td>
      <td>0.098028</td>
      <td>0.123011</td>
      <td>0.026440</td>
      <td>0.133094</td>
      <td>0.029577</td>
      <td>0.113265</td>
      <td>0.102173</td>
      <td>0.060385</td>
      <td>0.111696</td>
      <td>0.031705</td>
    </tr>
    <tr>
      <th>[600.0, 888.0)</th>
      <td>0.184709</td>
      <td>0.009106</td>
      <td>0.113416</td>
      <td>0.006914</td>
      <td>0.138473</td>
      <td>0.103872</td>
      <td>0.019661</td>
      <td>0.192769</td>
      <td>0.011837</td>
      <td>0.148658</td>
      <td>0.004350</td>
      <td>0.066235</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Applying a <code class="docutils literal notranslate"><span class="pre">PitchClassVectors</span></code> Analyzer to the localkey segments that have been grouped by keys, seems to not make much of a difference
(except that this one here does not normalize):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped_localkey_pcvs</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">PitchClassVectors</span><span class="p">(</span><span class="n">pitch_class_format</span><span class="o">=</span><span class="s1">&#39;pc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">grouped_localkey_slices</span><span class="p">)</span>
<span class="n">grouped_localkey_pcvs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>pc</th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
    </tr>
    <tr>
      <th>localkey_is_minor</th>
      <th>corpus</th>
      <th>fname</th>
      <th>localkey_slice</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="38" valign="top">False</th>
      <th rowspan="29" valign="top">ravel_piano</th>
      <th rowspan="11" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[0.0, 28.0)</th>
      <td>4.375000</td>
      <td>6.250000</td>
      <td>4.000000</td>
      <td>8.062500</td>
      <td>16.375000</td>
      <td>1.562500</td>
      <td>4.750000</td>
      <td>1.125000</td>
      <td>23.062500</td>
      <td>7.187500</td>
      <td>10.250000</td>
      <td>10.125000</td>
    </tr>
    <tr>
      <th>[63.25, 83.25)</th>
      <td>NaN</td>
      <td>21.500000</td>
      <td>NaN</td>
      <td>4.500000</td>
      <td>14.166667</td>
      <td>NaN</td>
      <td>17.166667</td>
      <td>NaN</td>
      <td>8.500000</td>
      <td>11.583333</td>
      <td>NaN</td>
      <td>10.583333</td>
    </tr>
    <tr>
      <th>[91.25, 103.25)</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.875000</td>
      <td>13.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>12.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.000000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[103.25, 111.25)</th>
      <td>1.000000</td>
      <td>6.000000</td>
      <td>NaN</td>
      <td>4.500000</td>
      <td>0.500000</td>
      <td>3.500000</td>
      <td>2.500000</td>
      <td>0.500000</td>
      <td>4.500000</td>
      <td>3.000000</td>
      <td>2.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>[111.25, 117.25)</th>
      <td>3.000000</td>
      <td>1.500000</td>
      <td>NaN</td>
      <td>2.500000</td>
      <td>2.750000</td>
      <td>NaN</td>
      <td>6.250000</td>
      <td>NaN</td>
      <td>6.750000</td>
      <td>NaN</td>
      <td>5.250000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[117.25, 134.25)</th>
      <td>NaN</td>
      <td>2.500000</td>
      <td>11.416667</td>
      <td>NaN</td>
      <td>5.250000</td>
      <td>6.541667</td>
      <td>6.500000</td>
      <td>NaN</td>
      <td>9.250000</td>
      <td>NaN</td>
      <td>11.541667</td>
      <td>7.750000</td>
    </tr>
    <tr>
      <th>[134.25, 141.25)</th>
      <td>1.500000</td>
      <td>0.375000</td>
      <td>2.333333</td>
      <td>1.625000</td>
      <td>0.125000</td>
      <td>1.000000</td>
      <td>2.125000</td>
      <td>3.750000</td>
      <td>0.208333</td>
      <td>NaN</td>
      <td>2.375000</td>
      <td>2.333333</td>
    </tr>
    <tr>
      <th>[153.25, 169.25)</th>
      <td>5.791667</td>
      <td>7.291667</td>
      <td>0.250000</td>
      <td>1.000000</td>
      <td>10.041667</td>
      <td>1.791667</td>
      <td>7.541667</td>
      <td>11.041667</td>
      <td>2.375000</td>
      <td>3.500000</td>
      <td>12.500000</td>
      <td>1.125000</td>
    </tr>
    <tr>
      <th>[169.25, 173.25)</th>
      <td>4.250000</td>
      <td>NaN</td>
      <td>3.000000</td>
      <td>2.916667</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.875000</td>
      <td>1.291667</td>
      <td>NaN</td>
      <td>2.666667</td>
      <td>1.000000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[208.25, 219.25)</th>
      <td>1.500000</td>
      <td>0.250000</td>
      <td>5.125000</td>
      <td>0.875000</td>
      <td>4.625000</td>
      <td>1.750000</td>
      <td>NaN</td>
      <td>1.500000</td>
      <td>5.375000</td>
      <td>0.500000</td>
      <td>0.250000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>[219.25, 333.25)</th>
      <td>20.748810</td>
      <td>44.164881</td>
      <td>9.142857</td>
      <td>22.935714</td>
      <td>59.026190</td>
      <td>8.892857</td>
      <td>40.721429</td>
      <td>14.490476</td>
      <td>68.542857</td>
      <td>49.636905</td>
      <td>8.520238</td>
      <td>40.163690</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <th>[43.0, 60.0)</th>
      <td>NaN</td>
      <td>4.833333</td>
      <td>7.145437</td>
      <td>NaN</td>
      <td>3.333333</td>
      <td>NaN</td>
      <td>4.700000</td>
      <td>7.333929</td>
      <td>2.000000</td>
      <td>3.833333</td>
      <td>NaN</td>
      <td>4.495635</td>
    </tr>
    <tr>
      <th>[60.0, 88.0)</th>
      <td>17.364394</td>
      <td>5.910714</td>
      <td>21.040909</td>
      <td>9.320238</td>
      <td>21.767857</td>
      <td>13.181061</td>
      <td>13.305556</td>
      <td>10.025000</td>
      <td>22.850433</td>
      <td>2.660714</td>
      <td>31.609199</td>
      <td>11.692857</td>
    </tr>
    <tr>
      <th>[106.0, 151.0)</th>
      <td>5.333333</td>
      <td>10.193162</td>
      <td>NaN</td>
      <td>6.153877</td>
      <td>3.014286</td>
      <td>14.293651</td>
      <td>5.870299</td>
      <td>5.388095</td>
      <td>33.674069</td>
      <td>10.265873</td>
      <td>9.035180</td>
      <td>4.300000</td>
    </tr>
    <tr>
      <th>[165.0, 188.0)</th>
      <td>1.416667</td>
      <td>1.000000</td>
      <td>12.333333</td>
      <td>2.166667</td>
      <td>1.361111</td>
      <td>23.916667</td>
      <td>NaN</td>
      <td>18.500000</td>
      <td>3.888889</td>
      <td>NaN</td>
      <td>4.661111</td>
      <td>1.111111</td>
    </tr>
    <tr>
      <th>[188.0, 198.0)</th>
      <td>1.887255</td>
      <td>NaN</td>
      <td>5.000000</td>
      <td>1.686275</td>
      <td>NaN</td>
      <td>0.769608</td>
      <td>1.000000</td>
      <td>6.000000</td>
      <td>2.852941</td>
      <td>1.000000</td>
      <td>13.000000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[270.0, 311.0)</th>
      <td>1.888889</td>
      <td>29.992126</td>
      <td>0.333333</td>
      <td>35.717126</td>
      <td>1.888889</td>
      <td>8.000000</td>
      <td>NaN</td>
      <td>26.051190</td>
      <td>NaN</td>
      <td>36.436404</td>
      <td>22.488095</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th rowspan="12" valign="top">Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <th>[0.0, 33.0)</th>
      <td>3.000000</td>
      <td>1.333333</td>
      <td>24.500000</td>
      <td>8.000000</td>
      <td>NaN</td>
      <td>3.000000</td>
      <td>6.500000</td>
      <td>2.666667</td>
      <td>2.000000</td>
      <td>16.666667</td>
      <td>0.166667</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>[33.0, 112.5)</th>
      <td>8.333333</td>
      <td>3.000000</td>
      <td>32.833333</td>
      <td>24.500000</td>
      <td>1.000000</td>
      <td>35.033333</td>
      <td>17.900000</td>
      <td>19.000000</td>
      <td>3.000000</td>
      <td>12.666667</td>
      <td>68.566667</td>
      <td>8.500000</td>
    </tr>
    <tr>
      <th>[112.5, 135.0)</th>
      <td>2.166667</td>
      <td>15.666667</td>
      <td>7.000000</td>
      <td>3.750000</td>
      <td>NaN</td>
      <td>9.416667</td>
      <td>11.500000</td>
      <td>1.000000</td>
      <td>10.000000</td>
      <td>14.750000</td>
      <td>6.500000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[165.0, 237.0)</th>
      <td>4.000000</td>
      <td>13.166667</td>
      <td>32.583333</td>
      <td>3.000000</td>
      <td>5.916667</td>
      <td>10.000000</td>
      <td>28.666667</td>
      <td>13.500000</td>
      <td>12.666667</td>
      <td>27.666667</td>
      <td>2.000000</td>
      <td>23.833333</td>
    </tr>
    <tr>
      <th>[269.0, 297.5)</th>
      <td>0.500000</td>
      <td>0.833333</td>
      <td>14.833333</td>
      <td>NaN</td>
      <td>12.666667</td>
      <td>NaN</td>
      <td>4.416667</td>
      <td>18.166667</td>
      <td>NaN</td>
      <td>18.666667</td>
      <td>NaN</td>
      <td>7.916667</td>
    </tr>
    <tr>
      <th>[467.0, 536.0)</th>
      <td>1.500000</td>
      <td>21.375000</td>
      <td>17.500000</td>
      <td>7.000000</td>
      <td>3.000000</td>
      <td>3.125000</td>
      <td>31.750000</td>
      <td>29.125000</td>
      <td>1.000000</td>
      <td>99.666667</td>
      <td>17.708333</td>
      <td>62.916667</td>
    </tr>
    <tr>
      <th>[536.0, 551.0)</th>
      <td>0.500000</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>8.500000</td>
      <td>1.000000</td>
      <td>0.500000</td>
      <td>1.000000</td>
      <td>5.500000</td>
      <td>NaN</td>
      <td>2.000000</td>
      <td>10.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>[551.0, 563.0)</th>
      <td>1.333333</td>
      <td>8.166667</td>
      <td>1.833333</td>
      <td>0.500000</td>
      <td>1.000000</td>
      <td>0.333333</td>
      <td>7.500000</td>
      <td>NaN</td>
      <td>0.500000</td>
      <td>0.666667</td>
      <td>3.833333</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[563.0, 566.0)</th>
      <td>NaN</td>
      <td>0.833333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.666667</td>
      <td>0.500000</td>
      <td>0.500000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.333333</td>
      <td>NaN</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>[566.0, 599.0)</th>
      <td>3.951587</td>
      <td>25.000000</td>
      <td>4.951587</td>
      <td>NaN</td>
      <td>4.201587</td>
      <td>8.976587</td>
      <td>NaN</td>
      <td>4.671032</td>
      <td>11.500000</td>
      <td>4.576587</td>
      <td>NaN</td>
      <td>4.921032</td>
    </tr>
    <tr>
      <th>[599.0, 671.75)</th>
      <td>8.000000</td>
      <td>24.366667</td>
      <td>22.333333</td>
      <td>16.125000</td>
      <td>11.750000</td>
      <td>8.500000</td>
      <td>28.041667</td>
      <td>22.916667</td>
      <td>12.500000</td>
      <td>44.625000</td>
      <td>14.250000</td>
      <td>37.391667</td>
    </tr>
    <tr>
      <th>[703.25, 738.75)</th>
      <td>4.500000</td>
      <td>16.166667</td>
      <td>22.333333</td>
      <td>3.750000</td>
      <td>2.750000</td>
      <td>4.666667</td>
      <td>21.916667</td>
      <td>18.250000</td>
      <td>3.750000</td>
      <td>19.166667</td>
      <td>9.166667</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th rowspan="9" valign="top">wagner_overtures</th>
      <th>WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <th>[126.5, 209.0)</th>
      <td>22.250000</td>
      <td>30.816667</td>
      <td>34.658333</td>
      <td>23.500000</td>
      <td>56.966667</td>
      <td>12.083333</td>
      <td>35.266667</td>
      <td>16.600000</td>
      <td>32.166667</td>
      <td>45.291667</td>
      <td>10.083333</td>
      <td>38.316667</td>
    </tr>
    <tr>
      <th rowspan="8" valign="top">WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel</th>
      <th>[0.0, 58.0)</th>
      <td>45.250000</td>
      <td>5.000000</td>
      <td>31.250000</td>
      <td>NaN</td>
      <td>32.750000</td>
      <td>36.250000</td>
      <td>2.000000</td>
      <td>54.500000</td>
      <td>2.000000</td>
      <td>36.000000</td>
      <td>3.000000</td>
      <td>21.000000</td>
    </tr>
    <tr>
      <th>[58.0, 132.0)</th>
      <td>47.750000</td>
      <td>1.500000</td>
      <td>47.250000</td>
      <td>7.000000</td>
      <td>30.000000</td>
      <td>10.500000</td>
      <td>30.000000</td>
      <td>58.000000</td>
      <td>9.000000</td>
      <td>37.500000</td>
      <td>1.000000</td>
      <td>33.000000</td>
    </tr>
    <tr>
      <th>[132.0, 379.5)</th>
      <td>178.166667</td>
      <td>15.625000</td>
      <td>113.666667</td>
      <td>19.625000</td>
      <td>162.950000</td>
      <td>95.516667</td>
      <td>39.625000</td>
      <td>214.450000</td>
      <td>19.500000</td>
      <td>156.833333</td>
      <td>10.666667</td>
      <td>102.375000</td>
    </tr>
    <tr>
      <th>[379.5, 432.0)</th>
      <td>8.750000</td>
      <td>26.875000</td>
      <td>2.250000</td>
      <td>15.833333</td>
      <td>31.625000</td>
      <td>7.416667</td>
      <td>34.083333</td>
      <td>2.000000</td>
      <td>15.083333</td>
      <td>22.833333</td>
      <td>15.250000</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>[432.0, 464.0)</th>
      <td>1.000000</td>
      <td>12.750000</td>
      <td>19.250000</td>
      <td>4.666667</td>
      <td>16.083333</td>
      <td>2.333333</td>
      <td>15.125000</td>
      <td>3.500000</td>
      <td>7.333333</td>
      <td>19.375000</td>
      <td>1.500000</td>
      <td>18.083333</td>
    </tr>
    <tr>
      <th>[464.0, 484.0)</th>
      <td>11.958333</td>
      <td>2.833333</td>
      <td>8.625000</td>
      <td>5.333333</td>
      <td>6.166667</td>
      <td>9.833333</td>
      <td>7.500000</td>
      <td>18.833333</td>
      <td>2.500000</td>
      <td>8.833333</td>
      <td>1.000000</td>
      <td>5.583333</td>
    </tr>
    <tr>
      <th>[484.0, 600.0)</th>
      <td>54.458333</td>
      <td>8.916667</td>
      <td>36.458333</td>
      <td>45.500000</td>
      <td>9.833333</td>
      <td>49.500000</td>
      <td>11.000000</td>
      <td>42.125000</td>
      <td>38.000000</td>
      <td>22.458333</td>
      <td>41.291667</td>
      <td>11.708333</td>
    </tr>
    <tr>
      <th>[600.0, 888.0)</th>
      <td>228.208333</td>
      <td>11.000000</td>
      <td>139.875000</td>
      <td>8.541667</td>
      <td>170.833333</td>
      <td>128.083333</td>
      <td>24.291667</td>
      <td>237.666667</td>
      <td>14.375000</td>
      <td>183.416667</td>
      <td>5.375000</td>
      <td>81.833333</td>
    </tr>
    <tr>
      <th rowspan="22" valign="top">True</th>
      <th rowspan="18" valign="top">ravel_piano</th>
      <th rowspan="4" valign="top">Ravel_-_Jeux_dEau</th>
      <th>[28.0, 63.25)</th>
      <td>NaN</td>
      <td>34.708333</td>
      <td>4.625000</td>
      <td>2.500000</td>
      <td>6.583333</td>
      <td>NaN</td>
      <td>10.416667</td>
      <td>NaN</td>
      <td>29.208333</td>
      <td>7.166667</td>
      <td>NaN</td>
      <td>6.583333</td>
    </tr>
    <tr>
      <th>[83.25, 91.25)</th>
      <td>NaN</td>
      <td>4.000000</td>
      <td>2.500000</td>
      <td>5.500000</td>
      <td>4.000000</td>
      <td>2.500000</td>
      <td>NaN</td>
      <td>3.500000</td>
      <td>NaN</td>
      <td>5.000000</td>
      <td>2.500000</td>
      <td>3.000000</td>
    </tr>
    <tr>
      <th>[141.25, 153.25)</th>
      <td>NaN</td>
      <td>9.916667</td>
      <td>5.750000</td>
      <td>0.500000</td>
      <td>4.250000</td>
      <td>7.166667</td>
      <td>0.250000</td>
      <td>3.000000</td>
      <td>1.750000</td>
      <td>0.250000</td>
      <td>0.250000</td>
      <td>9.166667</td>
    </tr>
    <tr>
      <th>[173.25, 208.25)</th>
      <td>10.958333</td>
      <td>9.058333</td>
      <td>9.666667</td>
      <td>14.891667</td>
      <td>0.500000</td>
      <td>8.000000</td>
      <td>13.141667</td>
      <td>1.166667</td>
      <td>11.016667</td>
      <td>16.291667</td>
      <td>10.266667</td>
      <td>1.416667</td>
    </tr>
    <tr>
      <th rowspan="9" valign="top">Ravel_-_Miroirs_III._Une_Barque_sur_l'ocean</th>
      <th>[0.0, 20.0)</th>
      <td>NaN</td>
      <td>23.333333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>16.000000</td>
      <td>NaN</td>
      <td>6.833333</td>
      <td>NaN</td>
      <td>15.916667</td>
      <td>8.916667</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[20.0, 29.0)</th>
      <td>1.333333</td>
      <td>NaN</td>
      <td>4.152778</td>
      <td>NaN</td>
      <td>5.561111</td>
      <td>2.066667</td>
      <td>2.000000</td>
      <td>2.833333</td>
      <td>0.333333</td>
      <td>3.969444</td>
      <td>NaN</td>
      <td>4.666667</td>
    </tr>
    <tr>
      <th>[29.0, 43.0)</th>
      <td>NaN</td>
      <td>15.833333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>11.500000</td>
      <td>NaN</td>
      <td>5.083333</td>
      <td>NaN</td>
      <td>11.666667</td>
      <td>6.250000</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[88.0, 106.0)</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.222222</td>
      <td>11.929487</td>
      <td>NaN</td>
      <td>9.000000</td>
      <td>2.333333</td>
      <td>NaN</td>
      <td>5.970620</td>
      <td>0.500000</td>
      <td>NaN</td>
      <td>14.044338</td>
    </tr>
    <tr>
      <th>[151.0, 165.0)</th>
      <td>NaN</td>
      <td>5.083333</td>
      <td>NaN</td>
      <td>11.666667</td>
      <td>6.250000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>14.833333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>11.500000</td>
    </tr>
    <tr>
      <th>[198.0, 255.5)</th>
      <td>10.000000</td>
      <td>2.333333</td>
      <td>12.958333</td>
      <td>1.500000</td>
      <td>NaN</td>
      <td>5.166667</td>
      <td>32.675366</td>
      <td>NaN</td>
      <td>2.666667</td>
      <td>48.685440</td>
      <td>2.000000</td>
      <td>8.000000</td>
    </tr>
    <tr>
      <th>[255.5, 270.0)</th>
      <td>2.000000</td>
      <td>NaN</td>
      <td>18.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.000000</td>
      <td>3.250000</td>
      <td>14.000000</td>
      <td>NaN</td>
      <td>25.500000</td>
      <td>7.000000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[311.0, 344.0)</th>
      <td>12.798275</td>
      <td>10.876696</td>
      <td>NaN</td>
      <td>1.901693</td>
      <td>14.162166</td>
      <td>6.000000</td>
      <td>9.000000</td>
      <td>16.784364</td>
      <td>NaN</td>
      <td>16.436222</td>
      <td>2.000000</td>
      <td>4.390584</td>
    </tr>
    <tr>
      <th>[344.0, 380.0)</th>
      <td>NaN</td>
      <td>26.270833</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>13.277778</td>
      <td>6.500000</td>
      <td>5.694444</td>
      <td>12.000000</td>
      <td>16.897222</td>
      <td>6.979167</td>
      <td>2.666667</td>
      <td>8.213889</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">Ravel_-_Miroirs_IV._Alborada_del_gracioso</th>
      <th>[135.0, 165.0)</th>
      <td>2.000000</td>
      <td>3.892308</td>
      <td>0.666667</td>
      <td>9.892308</td>
      <td>1.661538</td>
      <td>NaN</td>
      <td>0.900000</td>
      <td>0.430769</td>
      <td>25.066667</td>
      <td>0.861538</td>
      <td>NaN</td>
      <td>2.892308</td>
    </tr>
    <tr>
      <th>[237.0, 258.5)</th>
      <td>NaN</td>
      <td>11.750000</td>
      <td>19.250000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>23.000000</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>25.000000</td>
      <td>NaN</td>
      <td>11.500000</td>
    </tr>
    <tr>
      <th>[258.5, 269.0)</th>
      <td>12.500000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>17.500000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>18.500000</td>
      <td>NaN</td>
      <td>26.500000</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>[297.5, 467.0)</th>
      <td>2.000000</td>
      <td>117.250000</td>
      <td>15.250000</td>
      <td>1.000000</td>
      <td>47.250000</td>
      <td>168.250000</td>
      <td>124.625000</td>
      <td>194.250000</td>
      <td>6.125000</td>
      <td>33.375000</td>
      <td>28.333333</td>
      <td>32.291667</td>
    </tr>
    <tr>
      <th>[671.75, 703.25)</th>
      <td>3.954545</td>
      <td>7.333333</td>
      <td>4.166667</td>
      <td>11.954545</td>
      <td>3.250000</td>
      <td>13.833333</td>
      <td>5.303030</td>
      <td>14.500000</td>
      <td>7.750000</td>
      <td>6.954545</td>
      <td>9.250000</td>
      <td>14.750000</td>
    </tr>
    <tr>
      <th>sweelinck_keyboard</th>
      <th>SwWV258_fantasia_cromatica</th>
      <th>[0.0, 784.0)</th>
      <td>231.958333</td>
      <td>83.750000</td>
      <td>441.250000</td>
      <td>9.000000</td>
      <td>359.750000</td>
      <td>196.125000</td>
      <td>88.916667</td>
      <td>244.750000</td>
      <td>49.000000</td>
      <td>526.708333</td>
      <td>85.625000</td>
      <td>185.666667</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">wagner_overtures</th>
      <th rowspan="3" valign="top">WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia</th>
      <th>[0.0, 126.5)</th>
      <td>37.375000</td>
      <td>28.500000</td>
      <td>34.500000</td>
      <td>31.000000</td>
      <td>35.500000</td>
      <td>34.750000</td>
      <td>44.750000</td>
      <td>29.000000</td>
      <td>30.625000</td>
      <td>55.000000</td>
      <td>15.250000</td>
      <td>50.375000</td>
    </tr>
    <tr>
      <th>[209.0, 282.5)</th>
      <td>27.534524</td>
      <td>6.812500</td>
      <td>32.226190</td>
      <td>21.163690</td>
      <td>24.205357</td>
      <td>35.997024</td>
      <td>18.245833</td>
      <td>20.701190</td>
      <td>29.812500</td>
      <td>17.829167</td>
      <td>13.933333</td>
      <td>32.913690</td>
    </tr>
    <tr>
      <th>[282.5, 333.5)</th>
      <td>6.750000</td>
      <td>6.500000</td>
      <td>13.500000</td>
      <td>10.500000</td>
      <td>2.500000</td>
      <td>24.250000</td>
      <td>4.500000</td>
      <td>34.750000</td>
      <td>28.000000</td>
      <td>3.500000</td>
      <td>4.250000</td>
      <td>19.500000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>However, the previous grouping allows us to iterate through the grouped pitch class vectors, e.g. for summing them up for all segments in major and minor respectively:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">mode</span><span class="p">,),</span> <span class="n">pcvs</span> <span class="ow">in</span> <span class="n">grouped_localkey_pcvs</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">as_pandas</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PITCH CLASS PROFILE FOR ALL </span><span class="si">{</span><span class="s1">&#39;MINOR&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;MAJOR&#39;</span><span class="si">}</span><span class="s2"> SEGMENTS:&quot;</span><span class="p">)</span>
    <span class="n">summed</span> <span class="o">=</span> <span class="n">pcvs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">summed</span> <span class="o">/</span> <span class="n">summed</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PITCH CLASS PROFILE FOR ALL MAJOR SEGMENTS:
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pc
0     0.100962
1     0.055513
2     0.100440
3     0.046084
4     0.101070
5     0.074512
6     0.067518
7     0.128983
8     0.055902
9     0.132674
10    0.052344
11    0.083997
dtype: float64
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PITCH CLASS PROFILE FOR ALL MINOR SEGMENTS:
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pc
0     0.067182
1     0.075747
2     0.115458
3     0.026954
4     0.106718
5     0.097400
6     0.074578
7     0.113687
8     0.053320
9     0.156566
10    0.034102
11    0.078289
dtype: float64
</pre></div>
</div>
</div>
</div>
<section id="analyzing-slice-infos">
<h3>Analyzing slice infos<a class="headerlink" href="#analyzing-slice-infos" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lk_per_piece</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">PieceGrouper</span><span class="p">()</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">localkey_slices</span><span class="p">)</span>
<span class="n">lokalkeys_per_piece</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">LocalKeySequence</span><span class="p">()</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">lk_per_piece</span><span class="p">)</span>
<span class="n">lokalkeys_per_piece</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ravel_-_Jeux_dEau                                             [I, vi, I, iii, bI, I, V, IV, bIII, ii, V, bV,...
Ravel_-_Miroirs_III._Une_Barque_sur_l&#39;ocean                   [i, vii, i, III, bIV, ii, V, v, bIV, bVII, iv,...
Ravel_-_Miroirs_IV._Alborada_del_gracioso                     [I, bVI, bI, vii, I, vi, v, IV, iii, I, bII, I...
SwWV258_fantasia_cromatica                                                                                  [i]
WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia                                           [i, I, i, iii]
WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel                       [I, V, I, III, VI, I, bIII, I]
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">unique_localkeys</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">LocalKeyUnique</span><span class="p">()</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">lk_per_piece</span><span class="p">)</span>
<span class="n">unique_localkeys</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ravel_-_Jeux_dEau                                                         [I, vi, iii, bI, V, IV, bIII, ii, bV]
Ravel_-_Miroirs_III._Une_Barque_sur_l&#39;ocean                    [i, vii, III, bIV, ii, V, v, bVII, iv, bii, iii]
Ravel_-_Miroirs_IV._Alborada_del_gracioso                     [I, bVI, bI, vii, vi, v, IV, iii, bII, III, V,...
SwWV258_fantasia_cromatica                                                                                  [i]
WWV090_Tristan_01_Vorspiel-Prelude_Ricordi1888Floridia                                              [i, I, iii]
WWV096-Meistersinger_01_Vorspiel-Prelude_SchottKleinmichel                                [I, V, III, VI, bIII]
dtype: object
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>


            </article>



            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="readme.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">dimcat</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="manual.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Manual</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>

          </div>



            <div class="bd-sidebar-secondary bd-toc">

<div class="toc-item">

<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-dataset-object">
   The Dataset object
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#initializing-a-dataset">
     Initializing a Dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-pieces-using-ids">
     Accessing pieces using IDs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#groups-of-ids">
     Groups of IDs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-data-facets">
     Accessing data facets
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iterating">
       Iterating
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#getting">
       Getting
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#applying-pipelinesteps-to-a-dataset">
   Applying PipelineSteps to a Dataset
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#applying-a-filter">
     Applying a filter
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#applying-a-slicer">
     Applying a slicer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#applying-a-grouper">
     Applying a Grouper
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#applying-an-analyzer">
   Applying an Analyzer
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analyzing-slice-infos">
     Analyzing slice infos
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">

<div id="searchbox"></div>
</div>

<div class="toc-item">

</div>

<div class="toc-item">

<div class="tocsection sourcelink">
    <a href="_sources/tutorial.ipynb.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>


        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">

          </div>
        </footer>

      </main>
    </div>
  </div>



  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">

  <div class="footer-item">

<p class="copyright">

    &copy; Copyright 2023, Digital and Cognitive Musicology Lab @ cole Polytechnique Fdrale de Lausanne.<br>

</p>

  </div>

  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>

  <div class="footer-item">

<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>

</div>
  </footer>
  </body>
</html>
