{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "804df284-f8b2-4122-9984-2e02b8e38d2a",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Notebook repository 'dimcat' @ 2332fcf\n",
      "Data repo 'ABC' @ 560802e\n",
      "dimcat version 0.2.0.post1.dev109+g2332fcf.d20230210\n",
      "ms3 version 1.2.2\n"
     ]
    }
   ],
   "source": [
    "import os\n",
    "from git import Repo\n",
    "import dimcat as dc\n",
    "from ms3 import __version__ as ms3_version\n",
    "corpus_path = \"~/ABC\"\n",
    "repo = Repo(corpus_path)\n",
    "notebook_repo = Repo('.', search_parent_directories=True)\n",
    "notebook_repo_path = notebook_repo.git.rev_parse(\"--show-toplevel\")\n",
    "print(f\"Notebook repository '{os.path.basename(notebook_repo_path)}' @ {notebook_repo.commit().hexsha[:7]}\")\n",
    "print(f\"Data repo '{os.path.basename(corpus_path)}' @ {repo.commit().hexsha[:7]}\")\n",
    "print(f\"dimcat version {dc.__version__}\")\n",
    "print(f\"ms3 version {ms3_version}\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "ce47b368",
   "metadata": {},
   "source": [
    "# Working with Harmonic Annotations"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "7eed17bc",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "cb9eaf1a",
   "metadata": {},
   "source": [
    "## Load dataset\n",
    "\n",
    "Use dimcat's `Dataset` class to load a dataset.\n",
    "Each dataset consists of several subcorpora (here only `ABC`),\n",
    "which in turn consist of several pieces (here `n01_op18-1_01`, `n01_op18-1_02`, etc.).\n",
    "\n",
    "A `Dataset` has several representations of each piece (e.g. a list of chord labels or a list of notes) called *facets*.\n",
    "Each facet is represented by a dataframe.\n",
    "\n",
    "Corpora can be processed, e.g. slicing notes according to different criteria (see below).\n",
    "The output of these operations is again a dataset with facets."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "d5f7c90e",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[\u001b[1mdefault\u001b[0;0m|all]\n",
       "All corpora\n",
       "-----------\n",
       "View: This view is called 'default'. It \n",
       "\t- excludes fnames that are not contained in the metadata,\n",
       "\t- filters out file extensions requiring conversion (such as .xml), and\n",
       "\t- excludes review files and folders.\n",
       "\n",
       "            has   active   scores measures           notes        expanded       \n",
       "       metadata     view detected detected parsed detected parsed detected parsed\n",
       "corpus                                                                           \n",
       "ABC         yes  default       70       70     70       70     70       70     70\n",
       "\n",
       "210/560 files are excluded from this view.\n",
       "\n",
       "210 files have been excluded based on their subdir."
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dataset = dc.Dataset()\n",
    "dataset.load(corpus_path)\n",
    "dataset.data"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "08863064",
   "metadata": {},
   "source": [
    "## Get chord labels\n",
    "\n",
    "Chord labels are stored in the `expanded` facet.\n",
    "Using `.get_facet()` returns a single dataframe with all chord labels.\n",
    "Corpus, piece, and timespan (\"interval\") are encoded in an hierarchical index."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "55be8286",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>label</th>\n",
       "      <th>...</th>\n",
       "      <th>phraseend</th>\n",
       "      <th>chord_type</th>\n",
       "      <th>globalkey_is_minor</th>\n",
       "      <th>localkey_is_minor</th>\n",
       "      <th>chord_tones</th>\n",
       "      <th>added_tones</th>\n",
       "      <th>root</th>\n",
       "      <th>bass_note</th>\n",
       "      <th>alt_label</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>corpus</th>\n",
       "      <th>fname</th>\n",
       "      <th>interval</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"11\" valign=\"top\">ABC</th>\n",
       "      <th rowspan=\"5\" valign=\"top\">n01op18-1_01</th>\n",
       "      <th>[0.0, 3.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>F.I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[3.0, 6.0)</th>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>3</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>V</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(1, 5, 2)</td>\n",
       "      <td>()</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[6.0, 9.0)</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>6</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[9.0, 15.0)</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>9</td>\n",
       "      <td>6.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>IV6</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(3, 0, -1)</td>\n",
       "      <td>()</td>\n",
       "      <td>-1</td>\n",
       "      <td>3</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[15.0, 18.0)</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>15</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>V65</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Mm7</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(5, 2, -1, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>1</td>\n",
       "      <td>5</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">n16op135_04</th>\n",
       "      <th>[1140.0, 1141.0)</th>\n",
       "      <td>281</td>\n",
       "      <td>280</td>\n",
       "      <td>1140</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1141.0, 1142.0)</th>\n",
       "      <td>281</td>\n",
       "      <td>280</td>\n",
       "      <td>1141</td>\n",
       "      <td>1.0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I6</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "      <td>(4, 1, 0)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>4</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1142.0, 1144.0)</th>\n",
       "      <td>282</td>\n",
       "      <td>281</td>\n",
       "      <td>1142</td>\n",
       "      <td>2.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>V(64)</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "      <td>(1, 0, 4)</td>\n",
       "      <td>()</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1144.0, 1146.0)</th>\n",
       "      <td>282</td>\n",
       "      <td>281</td>\n",
       "      <td>1144</td>\n",
       "      <td>2.0</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>V7</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Mm7</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "      <td>(1, 5, 2, -1)</td>\n",
       "      <td>()</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1146.0, 1150.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>4.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I\\\\</td>\n",
       "      <td>...</td>\n",
       "      <td>\\\\</td>\n",
       "      <td>M</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>27953 rows × 31 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                       mc   mn quarterbeats  duration_qb  \\\n",
       "corpus fname        interval                                               \n",
       "ABC    n01op18-1_01 [0.0, 3.0)          1    1            0          3.0   \n",
       "                    [3.0, 6.0)          2    2            3          3.0   \n",
       "                    [6.0, 9.0)          3    3            6          3.0   \n",
       "                    [9.0, 15.0)         4    4            9          6.0   \n",
       "                    [15.0, 18.0)        6    6           15          3.0   \n",
       "...                                   ...  ...          ...          ...   \n",
       "       n16op135_04  [1140.0, 1141.0)  281  280         1140          1.0   \n",
       "                    [1141.0, 1142.0)  281  280         1141          1.0   \n",
       "                    [1142.0, 1144.0)  282  281         1142          2.0   \n",
       "                    [1144.0, 1146.0)  282  281         1144          2.0   \n",
       "                    [1146.0, 1150.0)  283  282         1146          4.0   \n",
       "\n",
       "                                     mc_onset mn_onset timesig  staff  voice  \\\n",
       "corpus fname        interval                                                   \n",
       "ABC    n01op18-1_01 [0.0, 3.0)              0        0     3/4      4      1   \n",
       "                    [3.0, 6.0)              0        0     3/4      4      1   \n",
       "                    [6.0, 9.0)              0        0     3/4      4      1   \n",
       "                    [9.0, 15.0)             0        0     3/4      4      1   \n",
       "                    [15.0, 18.0)            0        0     3/4      4      1   \n",
       "...                                       ...      ...     ...    ...    ...   \n",
       "       n16op135_04  [1140.0, 1141.0)      1/2      1/2     4/4      4      1   \n",
       "                    [1141.0, 1142.0)      3/4      3/4     4/4      4      1   \n",
       "                    [1142.0, 1144.0)        0        0     4/4      4      1   \n",
       "                    [1144.0, 1146.0)      1/2      1/2     4/4      4      1   \n",
       "                    [1146.0, 1150.0)        0        0     4/4      4      1   \n",
       "\n",
       "                                      label  ... phraseend chord_type  \\\n",
       "corpus fname        interval                 ...                        \n",
       "ABC    n01op18-1_01 [0.0, 3.0)          F.I  ...       NaN          M   \n",
       "                    [3.0, 6.0)            V  ...       NaN          M   \n",
       "                    [6.0, 9.0)            I  ...       NaN          M   \n",
       "                    [9.0, 15.0)         IV6  ...       NaN          M   \n",
       "                    [15.0, 18.0)        V65  ...       NaN        Mm7   \n",
       "...                                     ...  ...       ...        ...   \n",
       "       n16op135_04  [1140.0, 1141.0)      I  ...       NaN          M   \n",
       "                    [1141.0, 1142.0)     I6  ...       NaN          M   \n",
       "                    [1142.0, 1144.0)  V(64)  ...       NaN          M   \n",
       "                    [1144.0, 1146.0)     V7  ...       NaN        Mm7   \n",
       "                    [1146.0, 1150.0)    I\\\\  ...        \\\\          M   \n",
       "\n",
       "                                     globalkey_is_minor localkey_is_minor  \\\n",
       "corpus fname        interval                                                \n",
       "ABC    n01op18-1_01 [0.0, 3.0)                    False             False   \n",
       "                    [3.0, 6.0)                    False             False   \n",
       "                    [6.0, 9.0)                    False             False   \n",
       "                    [9.0, 15.0)                   False             False   \n",
       "                    [15.0, 18.0)                  False             False   \n",
       "...                                                 ...               ...   \n",
       "       n16op135_04  [1140.0, 1141.0)               True             False   \n",
       "                    [1141.0, 1142.0)               True             False   \n",
       "                    [1142.0, 1144.0)               True             False   \n",
       "                    [1144.0, 1146.0)               True             False   \n",
       "                    [1146.0, 1150.0)               True             False   \n",
       "\n",
       "                                        chord_tones added_tones root  \\\n",
       "corpus fname        interval                                           \n",
       "ABC    n01op18-1_01 [0.0, 3.0)            (0, 4, 1)          ()    0   \n",
       "                    [3.0, 6.0)            (1, 5, 2)          ()    1   \n",
       "                    [6.0, 9.0)            (0, 4, 1)          ()    0   \n",
       "                    [9.0, 15.0)          (3, 0, -1)          ()   -1   \n",
       "                    [15.0, 18.0)      (5, 2, -1, 1)          ()    1   \n",
       "...                                             ...         ...  ...   \n",
       "       n16op135_04  [1140.0, 1141.0)      (0, 4, 1)          ()    0   \n",
       "                    [1141.0, 1142.0)      (4, 1, 0)          ()    0   \n",
       "                    [1142.0, 1144.0)      (1, 0, 4)          ()    1   \n",
       "                    [1144.0, 1146.0)  (1, 5, 2, -1)          ()    1   \n",
       "                    [1146.0, 1150.0)      (0, 4, 1)          ()    0   \n",
       "\n",
       "                                     bass_note alt_label volta  \n",
       "corpus fname        interval                                    \n",
       "ABC    n01op18-1_01 [0.0, 3.0)               0       NaN  <NA>  \n",
       "                    [3.0, 6.0)               1       NaN  <NA>  \n",
       "                    [6.0, 9.0)               0       NaN  <NA>  \n",
       "                    [9.0, 15.0)              3       NaN  <NA>  \n",
       "                    [15.0, 18.0)             5       NaN  <NA>  \n",
       "...                                        ...       ...   ...  \n",
       "       n16op135_04  [1140.0, 1141.0)         0       NaN  <NA>  \n",
       "                    [1141.0, 1142.0)         4       NaN  <NA>  \n",
       "                    [1142.0, 1144.0)         1       NaN  <NA>  \n",
       "                    [1144.0, 1146.0)         1       NaN  <NA>  \n",
       "                    [1146.0, 1150.0)         0       NaN  <NA>  \n",
       "\n",
       "[27953 rows x 31 columns]"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "labels = dataset.get_facet(\"expanded\")\n",
    "labels"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "18c3f07b",
   "metadata": {},
   "source": [
    "## Get salami slices\n",
    "\n",
    "Use the `NoteSlicer` to obtain a sliced version of the dataset.\n",
    "Querying the note facet returns the sliced notes."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "e729cec1",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>duration</th>\n",
       "      <th>...</th>\n",
       "      <th>nominal_duration</th>\n",
       "      <th>scalar</th>\n",
       "      <th>tied</th>\n",
       "      <th>tpc</th>\n",
       "      <th>midi</th>\n",
       "      <th>name</th>\n",
       "      <th>octave</th>\n",
       "      <th>chord_id</th>\n",
       "      <th>tremolo</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>corpus</th>\n",
       "      <th>fname</th>\n",
       "      <th>onset_slice</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"11\" valign=\"top\">ABC</th>\n",
       "      <th rowspan=\"5\" valign=\"top\">n01op18-1_01</th>\n",
       "      <th rowspan=\"4\" valign=\"top\">[0.0, 1.0)</th>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>12</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>18</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>6</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.5</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>13</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">n16op135_04</th>\n",
       "      <th rowspan=\"5\" valign=\"top\">[1146.0, 1147.0)</th>\n",
       "      <th>[1146.0, 1147.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>2731</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1146.0, 1147.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>3</td>\n",
       "      <td>69</td>\n",
       "      <td>A4</td>\n",
       "      <td>4</td>\n",
       "      <td>2729</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1146.0, 1147.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>3</td>\n",
       "      <td>69</td>\n",
       "      <td>A4</td>\n",
       "      <td>4</td>\n",
       "      <td>2730</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1146.0, 1147.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>77</td>\n",
       "      <td>F5</td>\n",
       "      <td>5</td>\n",
       "      <td>2730</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1146.0, 1147.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>89</td>\n",
       "      <td>F6</td>\n",
       "      <td>6</td>\n",
       "      <td>2729</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>346633 rows × 21 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                        mc   mn quarterbeats  \\\n",
       "corpus fname        onset_slice                                                \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)          1    1            0   \n",
       "                                     [0.0, 1.0)          1    1            0   \n",
       "                                     [0.0, 1.0)          1    1            0   \n",
       "                                     [0.0, 1.0)          1    1            0   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)          1    1            1   \n",
       "...                                                    ...  ...          ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)  283  282         1146   \n",
       "                                     [1146.0, 1147.0)  283  282         1146   \n",
       "                                     [1146.0, 1147.0)  283  282         1146   \n",
       "                                     [1146.0, 1147.0)  283  282         1146   \n",
       "                                     [1146.0, 1147.0)  283  282         1146   \n",
       "\n",
       "                                                       duration_qb mc_onset  \\\n",
       "corpus fname        onset_slice                                               \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)                1.0        0   \n",
       "                                     [0.0, 1.0)                1.0        0   \n",
       "                                     [0.0, 1.0)                1.0        0   \n",
       "                                     [0.0, 1.0)                1.0        0   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)                0.5      1/4   \n",
       "...                                                            ...      ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)          1.0        0   \n",
       "                                     [1146.0, 1147.0)          1.0        0   \n",
       "                                     [1146.0, 1147.0)          1.0        0   \n",
       "                                     [1146.0, 1147.0)          1.0        0   \n",
       "                                     [1146.0, 1147.0)          1.0        0   \n",
       "\n",
       "                                                      mn_onset timesig  staff  \\\n",
       "corpus fname        onset_slice                                                 \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)              0     3/4      3   \n",
       "                                     [0.0, 1.0)              0     3/4      4   \n",
       "                                     [0.0, 1.0)              0     3/4      1   \n",
       "                                     [0.0, 1.0)              0     3/4      2   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)            1/4     3/4      3   \n",
       "...                                                        ...     ...    ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)        0     4/4      3   \n",
       "                                     [1146.0, 1147.0)        0     4/4      1   \n",
       "                                     [1146.0, 1147.0)        0     4/4      2   \n",
       "                                     [1146.0, 1147.0)        0     4/4      2   \n",
       "                                     [1146.0, 1147.0)        0     4/4      1   \n",
       "\n",
       "                                                       voice duration  ...  \\\n",
       "corpus fname        onset_slice                                        ...   \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)            1      1/4  ...   \n",
       "                                     [0.0, 1.0)            1      1/4  ...   \n",
       "                                     [0.0, 1.0)            1      1/4  ...   \n",
       "                                     [0.0, 1.0)            1      1/4  ...   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)            1      1/8  ...   \n",
       "...                                                      ...      ...  ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)      1      1/4  ...   \n",
       "                                     [1146.0, 1147.0)      1      1/4  ...   \n",
       "                                     [1146.0, 1147.0)      1      1/4  ...   \n",
       "                                     [1146.0, 1147.0)      1      1/4  ...   \n",
       "                                     [1146.0, 1147.0)      1      1/4  ...   \n",
       "\n",
       "                                                      nominal_duration scalar  \\\n",
       "corpus fname        onset_slice                                                 \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)                    1/4      1   \n",
       "                                     [0.0, 1.0)                    1/4      1   \n",
       "                                     [0.0, 1.0)                    1/4      1   \n",
       "                                     [0.0, 1.0)                    1/4      1   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)                    1/8      1   \n",
       "...                                                                ...    ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)              1/4      1   \n",
       "                                     [1146.0, 1147.0)              1/4      1   \n",
       "                                     [1146.0, 1147.0)              1/4      1   \n",
       "                                     [1146.0, 1147.0)              1/4      1   \n",
       "                                     [1146.0, 1147.0)              1/4      1   \n",
       "\n",
       "                                                       tied  tpc  midi  name  \\\n",
       "corpus fname        onset_slice                                                \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)           1   -1    53    F3   \n",
       "                                     [0.0, 1.0)           1   -1    53    F3   \n",
       "                                     [0.0, 1.0)           1   -1    65    F4   \n",
       "                                     [0.0, 1.0)           1   -1    65    F4   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)          -1   -1    53    F3   \n",
       "...                                                     ...  ...   ...   ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)  <NA>   -1    53    F3   \n",
       "                                     [1146.0, 1147.0)  <NA>    3    69    A4   \n",
       "                                     [1146.0, 1147.0)  <NA>    3    69    A4   \n",
       "                                     [1146.0, 1147.0)  <NA>   -1    77    F5   \n",
       "                                     [1146.0, 1147.0)  <NA>   -1    89    F6   \n",
       "\n",
       "                                                      octave  chord_id  \\\n",
       "corpus fname        onset_slice                                          \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)            3        12   \n",
       "                                     [0.0, 1.0)            3        18   \n",
       "                                     [0.0, 1.0)            4         0   \n",
       "                                     [0.0, 1.0)            4         6   \n",
       "                    [1.0, 1.5)       [1.0, 1.5)            3        13   \n",
       "...                                                      ...       ...   \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)      3      2731   \n",
       "                                     [1146.0, 1147.0)      4      2729   \n",
       "                                     [1146.0, 1147.0)      4      2730   \n",
       "                                     [1146.0, 1147.0)      5      2730   \n",
       "                                     [1146.0, 1147.0)      6      2729   \n",
       "\n",
       "                                                       tremolo volta  \n",
       "corpus fname        onset_slice                                       \n",
       "ABC    n01op18-1_01 [0.0, 1.0)       [0.0, 1.0)            NaN  <NA>  \n",
       "                                     [0.0, 1.0)            NaN  <NA>  \n",
       "                                     [0.0, 1.0)            NaN  <NA>  \n",
       "                                     [0.0, 1.0)            NaN  <NA>  \n",
       "                    [1.0, 1.5)       [1.0, 1.5)            NaN  <NA>  \n",
       "...                                                        ...   ...  \n",
       "       n16op135_04  [1146.0, 1147.0) [1146.0, 1147.0)      NaN  <NA>  \n",
       "                                     [1146.0, 1147.0)      NaN  <NA>  \n",
       "                                     [1146.0, 1147.0)      NaN  <NA>  \n",
       "                                     [1146.0, 1147.0)      NaN  <NA>  \n",
       "                                     [1146.0, 1147.0)      NaN  <NA>  \n",
       "\n",
       "[346633 rows x 21 columns]"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# this takes some time\n",
    "salami_dts = dc.NoteSlicer().process_data(dataset)\n",
    "salami_notes = salami_dts.get_facet(\"notes\")\n",
    "salami_notes"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "08966dc3",
   "metadata": {},
   "source": [
    "# Match salami slices with chord labels\n",
    "\n",
    "Each chord label has an `interval` index that encodes its timespan.\n",
    "We can use this to find the corresponding slices from the previous step.\n",
    "\n",
    "Let's try this for a single chord. Start by getting the interval of the first chord in the first piece:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "8d44373c",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>label</th>\n",
       "      <th>...</th>\n",
       "      <th>phraseend</th>\n",
       "      <th>chord_type</th>\n",
       "      <th>globalkey_is_minor</th>\n",
       "      <th>localkey_is_minor</th>\n",
       "      <th>chord_tones</th>\n",
       "      <th>added_tones</th>\n",
       "      <th>root</th>\n",
       "      <th>bass_note</th>\n",
       "      <th>alt_label</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>interval</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>[0.0, 3.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>F.I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[3.0, 6.0)</th>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>3</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>V</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(1, 5, 2)</td>\n",
       "      <td>()</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[6.0, 9.0)</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>6</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[9.0, 15.0)</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>9</td>\n",
       "      <td>6.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>IV6</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(3, 0, -1)</td>\n",
       "      <td>()</td>\n",
       "      <td>-1</td>\n",
       "      <td>3</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[15.0, 18.0)</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>15</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>V65</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Mm7</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(5, 2, -1, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>1</td>\n",
       "      <td>5</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[921.0, 924.0)</th>\n",
       "      <td>308</td>\n",
       "      <td>308</td>\n",
       "      <td>921</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[924.0, 927.0)</th>\n",
       "      <td>309</td>\n",
       "      <td>309</td>\n",
       "      <td>924</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>Fr6</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Fr</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(-4, 0, 2, 6)</td>\n",
       "      <td>()</td>\n",
       "      <td>2</td>\n",
       "      <td>-4</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[927.0, 930.0)</th>\n",
       "      <td>310</td>\n",
       "      <td>310</td>\n",
       "      <td>927</td>\n",
       "      <td>3.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I]</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[930.0, 937.0)</th>\n",
       "      <td>311</td>\n",
       "      <td>311</td>\n",
       "      <td>930</td>\n",
       "      <td>7.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[937.0, 939.0)</th>\n",
       "      <td>313</td>\n",
       "      <td>313</td>\n",
       "      <td>937</td>\n",
       "      <td>2.0</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>I\\\\</td>\n",
       "      <td>...</td>\n",
       "      <td>\\\\</td>\n",
       "      <td>M</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>(0, 4, 1)</td>\n",
       "      <td>()</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>405 rows × 31 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                 mc   mn quarterbeats  duration_qb mc_onset mn_onset timesig  \\\n",
       "interval                                                                       \n",
       "[0.0, 3.0)        1    1            0          3.0        0        0     3/4   \n",
       "[3.0, 6.0)        2    2            3          3.0        0        0     3/4   \n",
       "[6.0, 9.0)        3    3            6          3.0        0        0     3/4   \n",
       "[9.0, 15.0)       4    4            9          6.0        0        0     3/4   \n",
       "[15.0, 18.0)      6    6           15          3.0        0        0     3/4   \n",
       "...             ...  ...          ...          ...      ...      ...     ...   \n",
       "[921.0, 924.0)  308  308          921          3.0        0        0     3/4   \n",
       "[924.0, 927.0)  309  309          924          3.0        0        0     3/4   \n",
       "[927.0, 930.0)  310  310          927          3.0        0        0     3/4   \n",
       "[930.0, 937.0)  311  311          930          7.0        0        0     3/4   \n",
       "[937.0, 939.0)  313  313          937          2.0      1/4      1/4     3/4   \n",
       "\n",
       "                staff  voice label  ... phraseend chord_type  \\\n",
       "interval                            ...                        \n",
       "[0.0, 3.0)          4      1   F.I  ...       NaN          M   \n",
       "[3.0, 6.0)          4      1     V  ...       NaN          M   \n",
       "[6.0, 9.0)          4      1     I  ...       NaN          M   \n",
       "[9.0, 15.0)         4      1   IV6  ...       NaN          M   \n",
       "[15.0, 18.0)        4      1   V65  ...       NaN        Mm7   \n",
       "...               ...    ...   ...  ...       ...        ...   \n",
       "[921.0, 924.0)      4      1     I  ...       NaN          M   \n",
       "[924.0, 927.0)      4      1   Fr6  ...       NaN         Fr   \n",
       "[927.0, 930.0)      4      1    I]  ...       NaN          M   \n",
       "[930.0, 937.0)      4      1     I  ...       NaN          M   \n",
       "[937.0, 939.0)      4      1   I\\\\  ...        \\\\          M   \n",
       "\n",
       "               globalkey_is_minor localkey_is_minor    chord_tones  \\\n",
       "interval                                                             \n",
       "[0.0, 3.0)                  False             False      (0, 4, 1)   \n",
       "[3.0, 6.0)                  False             False      (1, 5, 2)   \n",
       "[6.0, 9.0)                  False             False      (0, 4, 1)   \n",
       "[9.0, 15.0)                 False             False     (3, 0, -1)   \n",
       "[15.0, 18.0)                False             False  (5, 2, -1, 1)   \n",
       "...                           ...               ...            ...   \n",
       "[921.0, 924.0)              False             False      (0, 4, 1)   \n",
       "[924.0, 927.0)              False             False  (-4, 0, 2, 6)   \n",
       "[927.0, 930.0)              False             False      (0, 4, 1)   \n",
       "[930.0, 937.0)              False             False      (0, 4, 1)   \n",
       "[937.0, 939.0)              False             False      (0, 4, 1)   \n",
       "\n",
       "               added_tones root bass_note alt_label volta  \n",
       "interval                                                   \n",
       "[0.0, 3.0)              ()    0         0       NaN  <NA>  \n",
       "[3.0, 6.0)              ()    1         1       NaN  <NA>  \n",
       "[6.0, 9.0)              ()    0         0       NaN  <NA>  \n",
       "[9.0, 15.0)             ()   -1         3       NaN  <NA>  \n",
       "[15.0, 18.0)            ()    1         5       NaN  <NA>  \n",
       "...                    ...  ...       ...       ...   ...  \n",
       "[921.0, 924.0)          ()    0         0       NaN  <NA>  \n",
       "[924.0, 927.0)          ()    2        -4       NaN  <NA>  \n",
       "[927.0, 930.0)          ()    0         0       NaN  <NA>  \n",
       "[930.0, 937.0)          ()    0         0       NaN  <NA>  \n",
       "[937.0, 939.0)          ()    0         0       NaN  <NA>  \n",
       "\n",
       "[405 rows x 31 columns]"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# zoom in on the chords in one piece\n",
    "chords = labels.loc[('ABC', 'n01op18-1_01')]\n",
    "chords"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "f32f34a9",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Interval(0.0, 3.0, closed='left')"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# get the interval of the first chord...\n",
    "chord0_interval = chords.index[0]\n",
    "chord0_interval # this is a pandas Interval"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "cded175d",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "mc                            1\n",
       "mn                            1\n",
       "quarterbeats                  0\n",
       "duration_qb                 3.0\n",
       "mc_onset                      0\n",
       "mn_onset                      0\n",
       "timesig                     3/4\n",
       "staff                         4\n",
       "voice                         1\n",
       "label                       F.I\n",
       "globalkey                     F\n",
       "localkey                      I\n",
       "pedal                       NaN\n",
       "chord                         I\n",
       "special                     NaN\n",
       "numeral                       I\n",
       "form                        NaN\n",
       "figbass                     NaN\n",
       "changes                     NaN\n",
       "relativeroot                NaN\n",
       "cadence                     NaN\n",
       "phraseend                   NaN\n",
       "chord_type                    M\n",
       "globalkey_is_minor        False\n",
       "localkey_is_minor         False\n",
       "chord_tones           (0, 4, 1)\n",
       "added_tones                  ()\n",
       "root                          0\n",
       "bass_note                     0\n",
       "alt_label                   NaN\n",
       "volta                      <NA>\n",
       "Name: [0.0, 3.0), dtype: object"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# and the chord itself\n",
    "chord0 = chords.loc[chord0_interval]\n",
    "chord0"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "b7b0e7a4",
   "metadata": {},
   "source": [
    "Finally, find all slices in the same piece that overlap with the chord:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "24865364",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>duration</th>\n",
       "      <th>...</th>\n",
       "      <th>nominal_duration</th>\n",
       "      <th>scalar</th>\n",
       "      <th>tied</th>\n",
       "      <th>tpc</th>\n",
       "      <th>midi</th>\n",
       "      <th>name</th>\n",
       "      <th>octave</th>\n",
       "      <th>chord_id</th>\n",
       "      <th>tremolo</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>onset_slice</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[0.0, 1.0)</th>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.00</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>12</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.00</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>18</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.00</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.00</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>6</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[1.0, 1.5)</th>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>13</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>19</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>7</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[1.5, 1.75)</th>\n",
       "      <th>[1.5, 1.75)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>3/2</td>\n",
       "      <td>0.25</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>1</td>\n",
       "      <td>55</td>\n",
       "      <td>G3</td>\n",
       "      <td>3</td>\n",
       "      <td>14</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.5, 1.75)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>3/2</td>\n",
       "      <td>0.25</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>1</td>\n",
       "      <td>55</td>\n",
       "      <td>G3</td>\n",
       "      <td>3</td>\n",
       "      <td>20</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.5, 1.75)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>3/2</td>\n",
       "      <td>0.25</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>1</td>\n",
       "      <td>67</td>\n",
       "      <td>G4</td>\n",
       "      <td>4</td>\n",
       "      <td>2</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.5, 1.75)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>3/2</td>\n",
       "      <td>0.25</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>1</td>\n",
       "      <td>67</td>\n",
       "      <td>G4</td>\n",
       "      <td>4</td>\n",
       "      <td>8</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[1.75, 2.0)</th>\n",
       "      <th>[1.75, 2.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>7/4</td>\n",
       "      <td>0.25</td>\n",
       "      <td>7/16</td>\n",
       "      <td>7/16</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>15</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.75, 2.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>7/4</td>\n",
       "      <td>0.25</td>\n",
       "      <td>7/16</td>\n",
       "      <td>7/16</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>21</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.75, 2.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>7/4</td>\n",
       "      <td>0.25</td>\n",
       "      <td>7/16</td>\n",
       "      <td>7/16</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>3</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.75, 2.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>7/4</td>\n",
       "      <td>0.25</td>\n",
       "      <td>7/16</td>\n",
       "      <td>7/16</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>9</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[2.0, 2.5)</th>\n",
       "      <th>[2.0, 2.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>4</td>\n",
       "      <td>52</td>\n",
       "      <td>E3</td>\n",
       "      <td>3</td>\n",
       "      <td>16</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.0, 2.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>4</td>\n",
       "      <td>52</td>\n",
       "      <td>E3</td>\n",
       "      <td>3</td>\n",
       "      <td>22</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.0, 2.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>4</td>\n",
       "      <td>64</td>\n",
       "      <td>E4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.0, 2.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>4</td>\n",
       "      <td>64</td>\n",
       "      <td>E4</td>\n",
       "      <td>4</td>\n",
       "      <td>10</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[2.5, 3.0)</th>\n",
       "      <th>[2.5, 3.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>5/2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>5/8</td>\n",
       "      <td>5/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>17</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.5, 3.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>5/2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>5/8</td>\n",
       "      <td>5/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>23</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.5, 3.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>5/2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>5/8</td>\n",
       "      <td>5/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>5</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.5, 3.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>5/2</td>\n",
       "      <td>0.50</td>\n",
       "      <td>5/8</td>\n",
       "      <td>5/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>11</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>24 rows × 21 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                         mc  mn quarterbeats  duration_qb mc_onset mn_onset  \\\n",
       "onset_slice                                                                   \n",
       "[0.0, 1.0)  [0.0, 1.0)    1   1            0         1.00        0        0   \n",
       "            [0.0, 1.0)    1   1            0         1.00        0        0   \n",
       "            [0.0, 1.0)    1   1            0         1.00        0        0   \n",
       "            [0.0, 1.0)    1   1            0         1.00        0        0   \n",
       "[1.0, 1.5)  [1.0, 1.5)    1   1            1         0.50      1/4      1/4   \n",
       "            [1.0, 1.5)    1   1            1         0.50      1/4      1/4   \n",
       "            [1.0, 1.5)    1   1            1         0.50      1/4      1/4   \n",
       "            [1.0, 1.5)    1   1            1         0.50      1/4      1/4   \n",
       "[1.5, 1.75) [1.5, 1.75)   1   1          3/2         0.25      3/8      3/8   \n",
       "            [1.5, 1.75)   1   1          3/2         0.25      3/8      3/8   \n",
       "            [1.5, 1.75)   1   1          3/2         0.25      3/8      3/8   \n",
       "            [1.5, 1.75)   1   1          3/2         0.25      3/8      3/8   \n",
       "[1.75, 2.0) [1.75, 2.0)   1   1          7/4         0.25     7/16     7/16   \n",
       "            [1.75, 2.0)   1   1          7/4         0.25     7/16     7/16   \n",
       "            [1.75, 2.0)   1   1          7/4         0.25     7/16     7/16   \n",
       "            [1.75, 2.0)   1   1          7/4         0.25     7/16     7/16   \n",
       "[2.0, 2.5)  [2.0, 2.5)    1   1            2         0.50      1/2      1/2   \n",
       "            [2.0, 2.5)    1   1            2         0.50      1/2      1/2   \n",
       "            [2.0, 2.5)    1   1            2         0.50      1/2      1/2   \n",
       "            [2.0, 2.5)    1   1            2         0.50      1/2      1/2   \n",
       "[2.5, 3.0)  [2.5, 3.0)    1   1          5/2         0.50      5/8      5/8   \n",
       "            [2.5, 3.0)    1   1          5/2         0.50      5/8      5/8   \n",
       "            [2.5, 3.0)    1   1          5/2         0.50      5/8      5/8   \n",
       "            [2.5, 3.0)    1   1          5/2         0.50      5/8      5/8   \n",
       "\n",
       "                        timesig  staff  voice duration  ... nominal_duration  \\\n",
       "onset_slice                                             ...                    \n",
       "[0.0, 1.0)  [0.0, 1.0)      3/4      3      1      1/4  ...              1/4   \n",
       "            [0.0, 1.0)      3/4      4      1      1/4  ...              1/4   \n",
       "            [0.0, 1.0)      3/4      1      1      1/4  ...              1/4   \n",
       "            [0.0, 1.0)      3/4      2      1      1/4  ...              1/4   \n",
       "[1.0, 1.5)  [1.0, 1.5)      3/4      3      1      1/8  ...              1/8   \n",
       "            [1.0, 1.5)      3/4      4      1      1/8  ...              1/8   \n",
       "            [1.0, 1.5)      3/4      1      1      1/8  ...              1/8   \n",
       "            [1.0, 1.5)      3/4      2      1      1/8  ...              1/8   \n",
       "[1.5, 1.75) [1.5, 1.75)     3/4      3      1     1/16  ...             1/16   \n",
       "            [1.5, 1.75)     3/4      4      1     1/16  ...             1/16   \n",
       "            [1.5, 1.75)     3/4      1      1     1/16  ...             1/16   \n",
       "            [1.5, 1.75)     3/4      2      1     1/16  ...             1/16   \n",
       "[1.75, 2.0) [1.75, 2.0)     3/4      3      1     1/16  ...             1/16   \n",
       "            [1.75, 2.0)     3/4      4      1     1/16  ...             1/16   \n",
       "            [1.75, 2.0)     3/4      1      1     1/16  ...             1/16   \n",
       "            [1.75, 2.0)     3/4      2      1     1/16  ...             1/16   \n",
       "[2.0, 2.5)  [2.0, 2.5)      3/4      3      1      1/8  ...              1/8   \n",
       "            [2.0, 2.5)      3/4      4      1      1/8  ...              1/8   \n",
       "            [2.0, 2.5)      3/4      1      1      1/8  ...              1/8   \n",
       "            [2.0, 2.5)      3/4      2      1      1/8  ...              1/8   \n",
       "[2.5, 3.0)  [2.5, 3.0)      3/4      3      1      1/8  ...              1/8   \n",
       "            [2.5, 3.0)      3/4      4      1      1/8  ...              1/8   \n",
       "            [2.5, 3.0)      3/4      1      1      1/8  ...              1/8   \n",
       "            [2.5, 3.0)      3/4      2      1      1/8  ...              1/8   \n",
       "\n",
       "                        scalar  tied  tpc  midi  name octave  chord_id  \\\n",
       "onset_slice                                                              \n",
       "[0.0, 1.0)  [0.0, 1.0)       1     1   -1    53    F3      3        12   \n",
       "            [0.0, 1.0)       1     1   -1    53    F3      3        18   \n",
       "            [0.0, 1.0)       1     1   -1    65    F4      4         0   \n",
       "            [0.0, 1.0)       1     1   -1    65    F4      4         6   \n",
       "[1.0, 1.5)  [1.0, 1.5)       1    -1   -1    53    F3      3        13   \n",
       "            [1.0, 1.5)       1    -1   -1    53    F3      3        19   \n",
       "            [1.0, 1.5)       1    -1   -1    65    F4      4         1   \n",
       "            [1.0, 1.5)       1    -1   -1    65    F4      4         7   \n",
       "[1.5, 1.75) [1.5, 1.75)      1  <NA>    1    55    G3      3        14   \n",
       "            [1.5, 1.75)      1  <NA>    1    55    G3      3        20   \n",
       "            [1.5, 1.75)      1  <NA>    1    67    G4      4         2   \n",
       "            [1.5, 1.75)      1  <NA>    1    67    G4      4         8   \n",
       "[1.75, 2.0) [1.75, 2.0)      1  <NA>   -1    53    F3      3        15   \n",
       "            [1.75, 2.0)      1  <NA>   -1    53    F3      3        21   \n",
       "            [1.75, 2.0)      1  <NA>   -1    65    F4      4         3   \n",
       "            [1.75, 2.0)      1  <NA>   -1    65    F4      4         9   \n",
       "[2.0, 2.5)  [2.0, 2.5)       1  <NA>    4    52    E3      3        16   \n",
       "            [2.0, 2.5)       1  <NA>    4    52    E3      3        22   \n",
       "            [2.0, 2.5)       1  <NA>    4    64    E4      4         4   \n",
       "            [2.0, 2.5)       1  <NA>    4    64    E4      4        10   \n",
       "[2.5, 3.0)  [2.5, 3.0)       1  <NA>   -1    53    F3      3        17   \n",
       "            [2.5, 3.0)       1  <NA>   -1    53    F3      3        23   \n",
       "            [2.5, 3.0)       1  <NA>   -1    65    F4      4         5   \n",
       "            [2.5, 3.0)       1  <NA>   -1    65    F4      4        11   \n",
       "\n",
       "                         tremolo volta  \n",
       "onset_slice                             \n",
       "[0.0, 1.0)  [0.0, 1.0)       NaN  <NA>  \n",
       "            [0.0, 1.0)       NaN  <NA>  \n",
       "            [0.0, 1.0)       NaN  <NA>  \n",
       "            [0.0, 1.0)       NaN  <NA>  \n",
       "[1.0, 1.5)  [1.0, 1.5)       NaN  <NA>  \n",
       "            [1.0, 1.5)       NaN  <NA>  \n",
       "            [1.0, 1.5)       NaN  <NA>  \n",
       "            [1.0, 1.5)       NaN  <NA>  \n",
       "[1.5, 1.75) [1.5, 1.75)      NaN  <NA>  \n",
       "            [1.5, 1.75)      NaN  <NA>  \n",
       "            [1.5, 1.75)      NaN  <NA>  \n",
       "            [1.5, 1.75)      NaN  <NA>  \n",
       "[1.75, 2.0) [1.75, 2.0)      NaN  <NA>  \n",
       "            [1.75, 2.0)      NaN  <NA>  \n",
       "            [1.75, 2.0)      NaN  <NA>  \n",
       "            [1.75, 2.0)      NaN  <NA>  \n",
       "[2.0, 2.5)  [2.0, 2.5)       NaN  <NA>  \n",
       "            [2.0, 2.5)       NaN  <NA>  \n",
       "            [2.0, 2.5)       NaN  <NA>  \n",
       "            [2.0, 2.5)       NaN  <NA>  \n",
       "[2.5, 3.0)  [2.5, 3.0)       NaN  <NA>  \n",
       "            [2.5, 3.0)       NaN  <NA>  \n",
       "            [2.5, 3.0)       NaN  <NA>  \n",
       "            [2.5, 3.0)       NaN  <NA>  \n",
       "\n",
       "[24 rows x 21 columns]"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "salamis = salami_notes.loc[(\"ABC\", \"n01op18-1_01\")]\n",
    "salamis[salamis.index.get_level_values(0).overlaps(chord0_interval)]"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "2efcdd1d",
   "metadata": {},
   "source": [
    "## Rest..."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "bcd5c100",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>duration</th>\n",
       "      <th>...</th>\n",
       "      <th>nominal_duration</th>\n",
       "      <th>scalar</th>\n",
       "      <th>tied</th>\n",
       "      <th>tpc</th>\n",
       "      <th>midi</th>\n",
       "      <th>name</th>\n",
       "      <th>octave</th>\n",
       "      <th>chord_id</th>\n",
       "      <th>tremolo</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>onset_slice</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">[0.0, 1.0)</th>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>12</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>18</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>6</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.5</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>13</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">[937.0, 938.0)</th>\n",
       "      <th>[937.0, 938.0)</th>\n",
       "      <td>313</td>\n",
       "      <td>313</td>\n",
       "      <td>937</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>4441</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[937.0, 938.0)</th>\n",
       "      <td>313</td>\n",
       "      <td>313</td>\n",
       "      <td>937</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>3</td>\n",
       "      <td>57</td>\n",
       "      <td>A3</td>\n",
       "      <td>3</td>\n",
       "      <td>4439</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[937.0, 938.0)</th>\n",
       "      <td>313</td>\n",
       "      <td>313</td>\n",
       "      <td>937</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>65</td>\n",
       "      <td>F4</td>\n",
       "      <td>4</td>\n",
       "      <td>4439</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[937.0, 938.0)</th>\n",
       "      <td>313</td>\n",
       "      <td>313</td>\n",
       "      <td>937</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>3</td>\n",
       "      <td>69</td>\n",
       "      <td>A4</td>\n",
       "      <td>4</td>\n",
       "      <td>4437</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[937.0, 938.0)</th>\n",
       "      <td>313</td>\n",
       "      <td>313</td>\n",
       "      <td>937</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>77</td>\n",
       "      <td>F5</td>\n",
       "      <td>5</td>\n",
       "      <td>4437</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>6857 rows × 21 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                mc   mn quarterbeats  duration_qb mc_onset  \\\n",
       "onset_slice                                                                  \n",
       "[0.0, 1.0)     [0.0, 1.0)        1    1            0          1.0        0   \n",
       "               [0.0, 1.0)        1    1            0          1.0        0   \n",
       "               [0.0, 1.0)        1    1            0          1.0        0   \n",
       "               [0.0, 1.0)        1    1            0          1.0        0   \n",
       "[1.0, 1.5)     [1.0, 1.5)        1    1            1          0.5      1/4   \n",
       "...                            ...  ...          ...          ...      ...   \n",
       "[937.0, 938.0) [937.0, 938.0)  313  313          937          1.0      1/4   \n",
       "               [937.0, 938.0)  313  313          937          1.0      1/4   \n",
       "               [937.0, 938.0)  313  313          937          1.0      1/4   \n",
       "               [937.0, 938.0)  313  313          937          1.0      1/4   \n",
       "               [937.0, 938.0)  313  313          937          1.0      1/4   \n",
       "\n",
       "                              mn_onset timesig  staff  voice duration  ...  \\\n",
       "onset_slice                                                            ...   \n",
       "[0.0, 1.0)     [0.0, 1.0)            0     3/4      3      1      1/4  ...   \n",
       "               [0.0, 1.0)            0     3/4      4      1      1/4  ...   \n",
       "               [0.0, 1.0)            0     3/4      1      1      1/4  ...   \n",
       "               [0.0, 1.0)            0     3/4      2      1      1/4  ...   \n",
       "[1.0, 1.5)     [1.0, 1.5)          1/4     3/4      3      1      1/8  ...   \n",
       "...                                ...     ...    ...    ...      ...  ...   \n",
       "[937.0, 938.0) [937.0, 938.0)      1/4     3/4      3      1      1/4  ...   \n",
       "               [937.0, 938.0)      1/4     3/4      2      1      1/4  ...   \n",
       "               [937.0, 938.0)      1/4     3/4      2      1      1/4  ...   \n",
       "               [937.0, 938.0)      1/4     3/4      1      1      1/4  ...   \n",
       "               [937.0, 938.0)      1/4     3/4      1      1      1/4  ...   \n",
       "\n",
       "                              nominal_duration scalar  tied  tpc  midi  name  \\\n",
       "onset_slice                                                                    \n",
       "[0.0, 1.0)     [0.0, 1.0)                  1/4      1     1   -1    53    F3   \n",
       "               [0.0, 1.0)                  1/4      1     1   -1    53    F3   \n",
       "               [0.0, 1.0)                  1/4      1     1   -1    65    F4   \n",
       "               [0.0, 1.0)                  1/4      1     1   -1    65    F4   \n",
       "[1.0, 1.5)     [1.0, 1.5)                  1/8      1    -1   -1    53    F3   \n",
       "...                                        ...    ...   ...  ...   ...   ...   \n",
       "[937.0, 938.0) [937.0, 938.0)              1/4      1  <NA>   -1    53    F3   \n",
       "               [937.0, 938.0)              1/4      1  <NA>    3    57    A3   \n",
       "               [937.0, 938.0)              1/4      1  <NA>   -1    65    F4   \n",
       "               [937.0, 938.0)              1/4      1  <NA>    3    69    A4   \n",
       "               [937.0, 938.0)              1/4      1  <NA>   -1    77    F5   \n",
       "\n",
       "                              octave  chord_id  tremolo volta  \n",
       "onset_slice                                                    \n",
       "[0.0, 1.0)     [0.0, 1.0)          3        12      NaN  <NA>  \n",
       "               [0.0, 1.0)          3        18      NaN  <NA>  \n",
       "               [0.0, 1.0)          4         0      NaN  <NA>  \n",
       "               [0.0, 1.0)          4         6      NaN  <NA>  \n",
       "[1.0, 1.5)     [1.0, 1.5)          3        13      NaN  <NA>  \n",
       "...                              ...       ...      ...   ...  \n",
       "[937.0, 938.0) [937.0, 938.0)      3      4441      NaN  <NA>  \n",
       "               [937.0, 938.0)      3      4439      NaN  <NA>  \n",
       "               [937.0, 938.0)      4      4439      NaN  <NA>  \n",
       "               [937.0, 938.0)      4      4437      NaN  <NA>  \n",
       "               [937.0, 938.0)      5      4437      NaN  <NA>  \n",
       "\n",
       "[6857 rows x 21 columns]"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "salami_notes.loc[(\"ABC\", \"n01op18-1_01\")]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "506ddec3",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>duration</th>\n",
       "      <th>...</th>\n",
       "      <th>nominal_duration</th>\n",
       "      <th>scalar</th>\n",
       "      <th>tied</th>\n",
       "      <th>tpc</th>\n",
       "      <th>midi</th>\n",
       "      <th>name</th>\n",
       "      <th>octave</th>\n",
       "      <th>chord_id</th>\n",
       "      <th>tremolo</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>[12.0, 13.0)</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>12.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>3/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/2</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>2</td>\n",
       "      <td>50</td>\n",
       "      <td>D3</td>\n",
       "      <td>3</td>\n",
       "      <td>64</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[12.0, 13.0)</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>12.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>3/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/2</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>2</td>\n",
       "      <td>62</td>\n",
       "      <td>D4</td>\n",
       "      <td>4</td>\n",
       "      <td>63</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[12.0, 13.0)</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>12.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>3/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/2</td>\n",
       "      <td>1</td>\n",
       "      <td>-2</td>\n",
       "      <td>70</td>\n",
       "      <td>Bb4</td>\n",
       "      <td>4</td>\n",
       "      <td>62</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[12.0, 13.0)</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>12.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>77</td>\n",
       "      <td>F5</td>\n",
       "      <td>5</td>\n",
       "      <td>56</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>4 rows × 21 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "              mc  mn quarterbeats  duration_qb mc_onset mn_onset timesig  \\\n",
       "[12.0, 13.0)   5   5         12.0          1.0        0        0     3/4   \n",
       "[12.0, 13.0)   5   5         12.0          1.0        0        0     3/4   \n",
       "[12.0, 13.0)   5   5         12.0          1.0        0        0     3/4   \n",
       "[12.0, 13.0)   5   5         12.0          1.0        0        0     3/4   \n",
       "\n",
       "              staff  voice duration  ... nominal_duration scalar  tied  tpc  \\\n",
       "[12.0, 13.0)      4      1      3/4  ...              1/2    3/2  <NA>    2   \n",
       "[12.0, 13.0)      3      1      3/4  ...              1/2    3/2  <NA>    2   \n",
       "[12.0, 13.0)      2      1      3/4  ...              1/2    3/2     1   -2   \n",
       "[12.0, 13.0)      1      1      1/4  ...              1/4      1     1   -1   \n",
       "\n",
       "              midi  name octave  chord_id  tremolo volta  \n",
       "[12.0, 13.0)    50    D3      3        64      NaN  <NA>  \n",
       "[12.0, 13.0)    62    D4      4        63      NaN  <NA>  \n",
       "[12.0, 13.0)    70   Bb4      4        62      NaN  <NA>  \n",
       "[12.0, 13.0)    77    F5      5        56      NaN  <NA>  \n",
       "\n",
       "[4 rows x 21 columns]"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "salami_notes.loc[(\"ABC\", \"n01op18-1_01\", pd.Interval(12.0,13.0,closed='left'))]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "fbc944f4",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'[0.0, 1.0)'"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "str(pd.Interval(0.0,1.0,closed='left'))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "fe006e51",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>mc</th>\n",
       "      <th>mn</th>\n",
       "      <th>quarterbeats</th>\n",
       "      <th>duration_qb</th>\n",
       "      <th>mc_onset</th>\n",
       "      <th>mn_onset</th>\n",
       "      <th>timesig</th>\n",
       "      <th>staff</th>\n",
       "      <th>voice</th>\n",
       "      <th>duration</th>\n",
       "      <th>...</th>\n",
       "      <th>nominal_duration</th>\n",
       "      <th>scalar</th>\n",
       "      <th>tied</th>\n",
       "      <th>tpc</th>\n",
       "      <th>midi</th>\n",
       "      <th>name</th>\n",
       "      <th>octave</th>\n",
       "      <th>chord_id</th>\n",
       "      <th>tremolo</th>\n",
       "      <th>volta</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>corpus</th>\n",
       "      <th>fname</th>\n",
       "      <th>onset_slice</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"11\" valign=\"top\">ABC</th>\n",
       "      <th rowspan=\"5\" valign=\"top\">n01op18-1_01</th>\n",
       "      <th>[0.0, 1.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>12</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.0, 1.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0.5</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>-1</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>13</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.5, 1.75)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>3/2</td>\n",
       "      <td>0.25</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/8</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>1</td>\n",
       "      <td>55</td>\n",
       "      <td>G3</td>\n",
       "      <td>3</td>\n",
       "      <td>14</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1.75, 2.0)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>7/4</td>\n",
       "      <td>0.25</td>\n",
       "      <td>7/16</td>\n",
       "      <td>7/16</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/16</td>\n",
       "      <td>...</td>\n",
       "      <td>1/16</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>53</td>\n",
       "      <td>F3</td>\n",
       "      <td>3</td>\n",
       "      <td>15</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[2.0, 2.5)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2</td>\n",
       "      <td>0.5</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>1/8</td>\n",
       "      <td>...</td>\n",
       "      <td>1/8</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>4</td>\n",
       "      <td>52</td>\n",
       "      <td>E3</td>\n",
       "      <td>3</td>\n",
       "      <td>16</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">n16op135_04</th>\n",
       "      <th>[1140.0, 1141.0)</th>\n",
       "      <td>281</td>\n",
       "      <td>280</td>\n",
       "      <td>1140</td>\n",
       "      <td>1.0</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>41</td>\n",
       "      <td>F2</td>\n",
       "      <td>2</td>\n",
       "      <td>2719</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1141.0, 1142.0)</th>\n",
       "      <td>281</td>\n",
       "      <td>280</td>\n",
       "      <td>1141</td>\n",
       "      <td>1.0</td>\n",
       "      <td>3/4</td>\n",
       "      <td>3/4</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>3</td>\n",
       "      <td>45</td>\n",
       "      <td>A2</td>\n",
       "      <td>2</td>\n",
       "      <td>2720</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1142.0, 1144.0)</th>\n",
       "      <td>282</td>\n",
       "      <td>281</td>\n",
       "      <td>1142</td>\n",
       "      <td>2.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/2</td>\n",
       "      <td>...</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>0</td>\n",
       "      <td>48</td>\n",
       "      <td>C3</td>\n",
       "      <td>3</td>\n",
       "      <td>2727</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1144.0, 1146.0)</th>\n",
       "      <td>282</td>\n",
       "      <td>281</td>\n",
       "      <td>1144</td>\n",
       "      <td>2.0</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1/2</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/2</td>\n",
       "      <td>...</td>\n",
       "      <td>1/2</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>0</td>\n",
       "      <td>36</td>\n",
       "      <td>C2</td>\n",
       "      <td>2</td>\n",
       "      <td>2728</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>[1146.0, 1147.0)</th>\n",
       "      <td>283</td>\n",
       "      <td>282</td>\n",
       "      <td>1146</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4/4</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>1/4</td>\n",
       "      <td>...</td>\n",
       "      <td>1/4</td>\n",
       "      <td>1</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "      <td>-1</td>\n",
       "      <td>41</td>\n",
       "      <td>F2</td>\n",
       "      <td>2</td>\n",
       "      <td>2732</td>\n",
       "      <td>NaN</td>\n",
       "      <td>&lt;NA&gt;</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>98253 rows × 21 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                       mc   mn quarterbeats duration_qb  \\\n",
       "corpus fname        onset_slice                                           \n",
       "ABC    n01op18-1_01 [0.0, 1.0)          1    1            0         1.0   \n",
       "                    [1.0, 1.5)          1    1            1         0.5   \n",
       "                    [1.5, 1.75)         1    1          3/2        0.25   \n",
       "                    [1.75, 2.0)         1    1          7/4        0.25   \n",
       "                    [2.0, 2.5)          1    1            2         0.5   \n",
       "...                                   ...  ...          ...         ...   \n",
       "       n16op135_04  [1140.0, 1141.0)  281  280         1140         1.0   \n",
       "                    [1141.0, 1142.0)  281  280         1141         1.0   \n",
       "                    [1142.0, 1144.0)  282  281         1142         2.0   \n",
       "                    [1144.0, 1146.0)  282  281         1144         2.0   \n",
       "                    [1146.0, 1147.0)  283  282         1146         1.0   \n",
       "\n",
       "                                     mc_onset mn_onset timesig staff voice  \\\n",
       "corpus fname        onset_slice                                              \n",
       "ABC    n01op18-1_01 [0.0, 1.0)              0        0     3/4     3     1   \n",
       "                    [1.0, 1.5)            1/4      1/4     3/4     3     1   \n",
       "                    [1.5, 1.75)           3/8      3/8     3/4     3     1   \n",
       "                    [1.75, 2.0)          7/16     7/16     3/4     3     1   \n",
       "                    [2.0, 2.5)            1/2      1/2     3/4     3     1   \n",
       "...                                       ...      ...     ...   ...   ...   \n",
       "       n16op135_04  [1140.0, 1141.0)      1/2      1/2     4/4     4     1   \n",
       "                    [1141.0, 1142.0)      3/4      3/4     4/4     4     1   \n",
       "                    [1142.0, 1144.0)        0        0     4/4     4     1   \n",
       "                    [1144.0, 1146.0)      1/2      1/2     4/4     4     1   \n",
       "                    [1146.0, 1147.0)        0        0     4/4     4     1   \n",
       "\n",
       "                                     duration  ... nominal_duration scalar  \\\n",
       "corpus fname        onset_slice                ...                           \n",
       "ABC    n01op18-1_01 [0.0, 1.0)            1/4  ...              1/4      1   \n",
       "                    [1.0, 1.5)            1/8  ...              1/8      1   \n",
       "                    [1.5, 1.75)          1/16  ...             1/16      1   \n",
       "                    [1.75, 2.0)          1/16  ...             1/16      1   \n",
       "                    [2.0, 2.5)            1/8  ...              1/8      1   \n",
       "...                                       ...  ...              ...    ...   \n",
       "       n16op135_04  [1140.0, 1141.0)      1/4  ...              1/4      1   \n",
       "                    [1141.0, 1142.0)      1/4  ...              1/4      1   \n",
       "                    [1142.0, 1144.0)      1/2  ...              1/2      1   \n",
       "                    [1144.0, 1146.0)      1/2  ...              1/2      1   \n",
       "                    [1146.0, 1147.0)      1/4  ...              1/4      1   \n",
       "\n",
       "                                      tied tpc midi name octave chord_id  \\\n",
       "corpus fname        onset_slice                                            \n",
       "ABC    n01op18-1_01 [0.0, 1.0)           1  -1   53   F3      3       12   \n",
       "                    [1.0, 1.5)          -1  -1   53   F3      3       13   \n",
       "                    [1.5, 1.75)       <NA>   1   55   G3      3       14   \n",
       "                    [1.75, 2.0)       <NA>  -1   53   F3      3       15   \n",
       "                    [2.0, 2.5)        <NA>   4   52   E3      3       16   \n",
       "...                                    ...  ..  ...  ...    ...      ...   \n",
       "       n16op135_04  [1140.0, 1141.0)  <NA>  -1   41   F2      2     2719   \n",
       "                    [1141.0, 1142.0)  <NA>   3   45   A2      2     2720   \n",
       "                    [1142.0, 1144.0)  <NA>   0   48   C3      3     2727   \n",
       "                    [1144.0, 1146.0)  <NA>   0   36   C2      2     2728   \n",
       "                    [1146.0, 1147.0)  <NA>  -1   41   F2      2     2732   \n",
       "\n",
       "                                     tremolo volta  \n",
       "corpus fname        onset_slice                     \n",
       "ABC    n01op18-1_01 [0.0, 1.0)           NaN   NaN  \n",
       "                    [1.0, 1.5)           NaN   NaN  \n",
       "                    [1.5, 1.75)          NaN   NaN  \n",
       "                    [1.75, 2.0)          NaN   NaN  \n",
       "                    [2.0, 2.5)           NaN   NaN  \n",
       "...                                      ...   ...  \n",
       "       n16op135_04  [1140.0, 1141.0)     NaN  <NA>  \n",
       "                    [1141.0, 1142.0)     NaN  <NA>  \n",
       "                    [1142.0, 1144.0)     NaN  <NA>  \n",
       "                    [1144.0, 1146.0)     NaN  <NA>  \n",
       "                    [1146.0, 1147.0)     NaN  <NA>  \n",
       "\n",
       "[98253 rows x 21 columns]"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "slice_info = salami_dts.get_slice_info()\n",
    "slice_info.to_csv('ABC_chord_slices.tsv.zip', sep='\\t')\n",
    "slice_info"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "c0713f68-64e5-4dce-a7b7-aba68f48ba49",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "dimcat",
   "language": "python",
   "name": "dimcat"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.9"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
